{"ast":null,"code":"var _jsxFileName = \"/home/abu/Documents/dev/experiments/exp1/client/src/components/home/Home.js\";\nimport React from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Home extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  componentDidMount() {\n    this.startJanusServerRoom();\n  }\n\n  startJanusStreaming() {\n    var server = null;\n    if (window.location.protocol === 'http:') server = \"http://\" + window.location.hostname + \":8088/janus\";else server = \"https://\" + window.location.hostname + \":8089/janus\";\n    var janus = null;\n    var streaming = null;\n    var opaqueId = \"streamingtest-\" + Janus.randomString(12);\n    var bitrateTimer = null;\n    var spinner = null;\n    var simulcastStarted = false,\n        svcStarted = false;\n    var selectedStream = null;\n    $(document).ready(function () {\n      // Initialize the library (all console debuggers enabled)\n      Janus.init({\n        debug: \"all\",\n        callback: function () {\n          // Use a button to start the demo\n          $('#start').one('click', function () {\n            $(this).attr('disabled', true).unbind('click'); // Make sure the browser supports WebRTC\n\n            if (!Janus.isWebrtcSupported()) {\n              bootbox.alert(\"No WebRTC support... \");\n              return;\n            } // Create session\n\n\n            janus = new Janus({\n              server: server,\n              success: function () {\n                // Attach to Streaming plugin\n                janus.attach({\n                  plugin: \"janus.plugin.streaming\",\n                  opaqueId: opaqueId,\n                  success: function (pluginHandle) {\n                    $('#details').remove();\n                    streaming = pluginHandle;\n                    Janus.log(\"Plugin attached! (\" + streaming.getPlugin() + \", id=\" + streaming.getId() + \")\"); // Setup streaming session\n\n                    $('#update-streams').click(updateStreamsList);\n                    updateStreamsList();\n                    $('#start').removeAttr('disabled').html(\"Stop\").click(function () {\n                      $(this).attr('disabled', true);\n                      clearInterval(bitrateTimer);\n                      janus.destroy();\n                      $('#streamslist').attr('disabled', true);\n                      $('#watch').attr('disabled', true).unbind('click');\n                      $('#start').attr('disabled', true).html(\"Bye\").unbind('click');\n                    });\n                  },\n                  error: function (error) {\n                    Janus.error(\"  -- Error attaching plugin... \", error);\n                    bootbox.alert(\"Error attaching plugin... \" + error);\n                  },\n                  iceState: function (state) {\n                    Janus.log(\"ICE state changed to \" + state);\n                  },\n                  webrtcState: function (on) {\n                    Janus.log(\"Janus says our WebRTC PeerConnection is \" + (on ? \"up\" : \"down\") + \" now\");\n                  },\n                  onmessage: function (msg, jsep) {\n                    Janus.debug(\" ::: Got a message :::\", msg);\n                    var result = msg[\"result\"];\n\n                    if (result) {\n                      if (result[\"status\"]) {\n                        var status = result[\"status\"];\n                        if (status === 'starting') $('#status').removeClass('hide').text(\"Starting, please wait...\").show();else if (status === 'started') $('#status').removeClass('hide').text(\"Started\").show();else if (status === 'stopped') stopStream();\n                      } else if (msg[\"streaming\"] === \"event\") {\n                        // Is simulcast in place?\n                        var substream = result[\"substream\"];\n                        var temporal = result[\"temporal\"];\n\n                        if (substream !== null && substream !== undefined || temporal !== null && temporal !== undefined) {\n                          if (!simulcastStarted) {\n                            simulcastStarted = true;\n                            addSimulcastButtons(remoteFeed.videoCodec === \"vp8\");\n                          } // We just received notice that there's been a switch, update the buttons\n\n\n                          updateSimulcastButtons(substream, temporal);\n                        } // Is VP9/SVC in place?\n\n\n                        var spatial = result[\"spatial_layer\"];\n                        temporal = result[\"temporal_layer\"];\n\n                        if (spatial !== null && spatial !== undefined || temporal !== null && temporal !== undefined) {\n                          if (!svcStarted) {\n                            svcStarted = true;\n                            addSvcButtons();\n                          } // We just received notice that there's been a switch, update the buttons\n\n\n                          updateSvcButtons(spatial, temporal);\n                        }\n                      }\n                    } else if (msg[\"error\"]) {\n                      bootbox.alert(msg[\"error\"]);\n                      stopStream();\n                      return;\n                    }\n\n                    if (jsep) {\n                      Janus.debug(\"Handling SDP as well...\", jsep);\n                      var stereo = jsep.sdp.indexOf(\"stereo=1\") !== -1; // Offer from the plugin, let's answer\n\n                      streaming.createAnswer({\n                        jsep: jsep,\n                        // We want recvonly audio/video and, if negotiated, datachannels\n                        media: {\n                          audioSend: false,\n                          videoSend: false,\n                          data: true\n                        },\n                        customizeSdp: function (jsep) {\n                          if (stereo && jsep.sdp.indexOf(\"stereo=1\") == -1) {\n                            // Make sure that our offer contains stereo too\n                            jsep.sdp = jsep.sdp.replace(\"useinbandfec=1\", \"useinbandfec=1;stereo=1\");\n                          }\n                        },\n                        success: function (jsep) {\n                          Janus.debug(\"Got SDP!\", jsep);\n                          var body = {\n                            request: \"start\"\n                          };\n                          streaming.send({\n                            message: body,\n                            jsep: jsep\n                          });\n                          $('#watch').html(\"Stop\").removeAttr('disabled').click(stopStream);\n                        },\n                        error: function (error) {\n                          Janus.error(\"WebRTC error:\", error);\n                          bootbox.alert(\"WebRTC error... \" + error.message);\n                        }\n                      });\n                    }\n                  },\n                  onremotestream: function (stream) {\n                    Janus.debug(\" ::: Got a remote stream :::\", stream);\n                    var addButtons = false;\n\n                    if ($('#remotevideo').length === 0) {\n                      addButtons = true;\n                      $('#stream').append('<video class=\"rounded centered hide\" id=\"remotevideo\" width=\"100%\" height=\"100%\" playsinline/>');\n                      $('#remotevideo').get(0).volume = 0; // Show the stream and hide the spinner when we get a playing event\n\n                      $(\"#remotevideo\").bind(\"playing\", function () {\n                        $('#waitingvideo').remove();\n                        if (this.videoWidth) $('#remotevideo').removeClass('hide').show();\n                        if (spinner) spinner.stop();\n                        spinner = null;\n                        var videoTracks = stream.getVideoTracks();\n                        if (!videoTracks || videoTracks.length === 0) return;\n                        var width = this.videoWidth;\n                        var height = this.videoHeight;\n                        $('#curres').removeClass('hide').text(width + 'x' + height).show();\n\n                        if (Janus.webRTCAdapter.browserDetails.browser === \"firefox\") {\n                          // Firefox Stable has a bug: width and height are not immediately available after a playing\n                          setTimeout(function () {\n                            var width = $(\"#remotevideo\").get(0).videoWidth;\n                            var height = $(\"#remotevideo\").get(0).videoHeight;\n                            $('#curres').removeClass('hide').text(width + 'x' + height).show();\n                          }, 2000);\n                        }\n                      });\n                    }\n\n                    Janus.attachMediaStream($('#remotevideo').get(0), stream);\n                    $(\"#remotevideo\").get(0).play();\n                    $(\"#remotevideo\").get(0).volume = 1;\n                    var videoTracks = stream.getVideoTracks();\n\n                    if (!videoTracks || videoTracks.length === 0) {\n                      // No remote video\n                      $('#remotevideo').hide();\n\n                      if ($('#stream .no-video-container').length === 0) {\n                        $('#stream').append('<div class=\"no-video-container\">' + '<i class=\"fa fa-video-camera fa-5 no-video-icon\"></i>' + '<span class=\"no-video-text\">No remote video available</span>' + '</div>');\n                      }\n                    } else {\n                      $('#stream .no-video-container').remove();\n                      $('#remotevideo').removeClass('hide').show();\n                    }\n\n                    if (!addButtons) return;\n\n                    if (videoTracks && videoTracks.length && (Janus.webRTCAdapter.browserDetails.browser === \"chrome\" || Janus.webRTCAdapter.browserDetails.browser === \"firefox\" || Janus.webRTCAdapter.browserDetails.browser === \"safari\")) {\n                      $('#curbitrate').removeClass('hide').show();\n                      bitrateTimer = setInterval(function () {\n                        // Display updated bitrate, if supported\n                        var bitrate = streaming.getBitrate();\n                        $('#curbitrate').text(bitrate); // Check if the resolution changed too\n\n                        var width = $(\"#remotevideo\").get(0).videoWidth;\n                        var height = $(\"#remotevideo\").get(0).videoHeight;\n                        if (width > 0 && height > 0) $('#curres').removeClass('hide').text(width + 'x' + height).show();\n                      }, 1000);\n                    }\n                  },\n                  ondataopen: function (data) {\n                    Janus.log(\"The DataChannel is available!\");\n                    $('#waitingvideo').remove();\n                    $('#stream').append('<input class=\"form-control\" type=\"text\" id=\"datarecv\" disabled></input>');\n                    if (spinner) spinner.stop();\n                    spinner = null;\n                  },\n                  ondata: function (data) {\n                    Janus.debug(\"We got data from the DataChannel!\", data);\n                    $('#datarecv').val(data);\n                  },\n                  oncleanup: function () {\n                    Janus.log(\" ::: Got a cleanup notification :::\");\n                    $('#waitingvideo').remove();\n                    $('#remotevideo').remove();\n                    $('#datarecv').remove();\n                    $('.no-video-container').remove();\n                    $('#bitrate').attr('disabled', true);\n                    $('#bitrateset').html('Bandwidth<span class=\"caret\"></span>');\n                    $('#curbitrate').hide();\n                    if (bitrateTimer) clearInterval(bitrateTimer);\n                    bitrateTimer = null;\n                    $('#curres').hide();\n                    $('#simulcast').remove();\n                    $('#metadata').empty();\n                    $('#info').addClass('hide').hide();\n                    simulcastStarted = false;\n                  }\n                });\n              },\n              error: function (error) {\n                Janus.error(error);\n                bootbox.alert(error, function () {\n                  window.location.reload();\n                });\n              },\n              destroyed: function () {\n                window.location.reload();\n              }\n            });\n          });\n        }\n      });\n    });\n\n    async function updateStreamsList() {\n      Janus.debug(\"updateStreamsList\");\n      const myInit = {\n        method: 'GET'\n      }; // fetch api \n      //const id = '60c07f7c360386d21c4ba0eb'; // fetch id\n\n      const id = '60d44ebac53d31346858c759';\n      const device = await fetch(`http://localhost:5003/auth/users/${id}/device`, myInit).then(response => response.json()).then(data => data.device);\n      Janus.log(\"fetched device \", device);\n      $('#update-streams').unbind('click').addClass('fa-spin');\n      var body = {\n        request: \"list\"\n      };\n      Janus.debug(\"Sending message:\", body);\n      streaming.send({\n        message: body,\n        success: function (result) {\n          setTimeout(function () {\n            $('#update-streams').removeClass('fa-spin').click(updateStreamsList);\n          }, 500);\n\n          if (!result) {\n            bootbox.alert(\"Got no response to our query for available streams\");\n            return;\n          }\n\n          if (result[\"list\"]) {\n            $('#streams').removeClass('hide').show();\n            $('#streamslist').empty();\n            $('#watch').attr('disabled', true).unbind('click');\n            var list = result[\"list\"];\n            Janus.log(\"Got a list of available streams\");\n\n            if (list && Array.isArray(list)) {\n              list.sort(function (a, b) {\n                if (!a || a.id < (b ? b.id : 0)) return -1;\n                if (!b || b.id < (a ? a.id : 0)) return 1;\n                return 0;\n              });\n            }\n\n            Janus.debug(list);\n            list = list.filter(stream => device.includes(stream.id + \"\"));\n            Janus.log(\"filtered list : \", list);\n\n            for (var mp in list) {\n              Janus.debug(\"  >> [\" + list[mp][\"id\"] + \"] \" + list[mp][\"description\"] + \" (\" + list[mp][\"type\"] + \")\");\n              $('#streamslist').append(\"<li><a href='#' id='\" + list[mp][\"id\"] + \"'>\" + list[mp][\"description\"] + \" (\" + list[mp][\"type\"] + \")\" + \"</a></li>\");\n            }\n\n            $('#streamslist a').unbind('click').click(function () {\n              selectedStream = $(this).attr(\"id\");\n              $('#streamset').html($(this).html()).parent().removeClass('open');\n              return false;\n            });\n            $('#watch').removeAttr('disabled').unbind('click').click(startStream);\n          }\n        }\n      });\n    }\n\n    function getStreamInfo() {\n      $('#metadata').empty();\n      $('#info').addClass('hide').hide();\n      if (!selectedStream) return; // Send a request for more info on the mountpoint we subscribed to\n\n      var body = {\n        request: \"info\",\n        id: parseInt(selectedStream) || selectedStream\n      };\n      streaming.send({\n        message: body,\n        success: function (result) {\n          if (result && result.info && result.info.metadata) {\n            $('#metadata').html(result.info.metadata);\n            $('#info').removeClass('hide').show();\n          }\n        }\n      });\n    }\n\n    function startStream() {\n      Janus.log(\"Selected video id #\" + selectedStream);\n\n      if (!selectedStream) {\n        bootbox.alert(\"Select a stream from the list\");\n        return;\n      }\n\n      $('#streamset').attr('disabled', true);\n      $('#streamslist').attr('disabled', true);\n      $('#watch').attr('disabled', true).unbind('click');\n      var body = {\n        request: \"watch\",\n        id: parseInt(selectedStream) || selectedStream\n      };\n      streaming.send({\n        message: body\n      }); // No remote video yet\n\n      $('#stream').append('<video class=\"rounded centered\" id=\"waitingvideo\" width=\"100%\" height=\"100%\" />');\n\n      if (spinner == null) {\n        var target = document.getElementById('stream');\n        spinner = new Spinner({\n          top: 100\n        }).spin(target);\n      } else {\n        spinner.spin();\n      } // Get some more info for the mountpoint to display, if any\n\n\n      getStreamInfo();\n    }\n\n    function stopStream() {\n      $('#watch').attr('disabled', true).unbind('click');\n      var body = {\n        request: \"stop\"\n      };\n      streaming.send({\n        message: body\n      });\n      streaming.hangup();\n      $('#streamset').removeAttr('disabled');\n      $('#streamslist').removeAttr('disabled');\n      $('#watch').html(\"Watch or Listen\").removeAttr('disabled').unbind('click').click(startStream);\n      $('#status').empty().hide();\n      $('#bitrate').attr('disabled', true);\n      $('#bitrateset').html('Bandwidth<span class=\"caret\"></span>');\n      $('#curbitrate').hide();\n      if (bitrateTimer) clearInterval(bitrateTimer);\n      bitrateTimer = null;\n      $('#curres').empty().hide();\n      $('#simulcast').remove();\n      simulcastStarted = false;\n    } // Helpers to create Simulcast-related UI, if enabled\n\n\n    function addSimulcastButtons(temporal) {\n      $('#curres').parent().append('<div id=\"simulcast\" class=\"btn-group-vertical btn-group-vertical-xs pull-right\">' + '\t<div class\"row\">' + '\t\t<div class=\"btn-group btn-group-xs\" style=\"width: 100%\">' + '\t\t\t<button id=\"sl-2\" type=\"button\" class=\"btn btn-primary\" data-toggle=\"tooltip\" title=\"Switch to higher quality\" style=\"width: 33%\">SL 2</button>' + '\t\t\t<button id=\"sl-1\" type=\"button\" class=\"btn btn-primary\" data-toggle=\"tooltip\" title=\"Switch to normal quality\" style=\"width: 33%\">SL 1</button>' + '\t\t\t<button id=\"sl-0\" type=\"button\" class=\"btn btn-primary\" data-toggle=\"tooltip\" title=\"Switch to lower quality\" style=\"width: 34%\">SL 0</button>' + '\t\t</div>' + '\t</div>' + '\t<div class\"row\">' + '\t\t<div class=\"btn-group btn-group-xs hide\" style=\"width: 100%\">' + '\t\t\t<button id=\"tl-2\" type=\"button\" class=\"btn btn-primary\" data-toggle=\"tooltip\" title=\"Cap to temporal layer 2\" style=\"width: 34%\">TL 2</button>' + '\t\t\t<button id=\"tl-1\" type=\"button\" class=\"btn btn-primary\" data-toggle=\"tooltip\" title=\"Cap to temporal layer 1\" style=\"width: 33%\">TL 1</button>' + '\t\t\t<button id=\"tl-0\" type=\"button\" class=\"btn btn-primary\" data-toggle=\"tooltip\" title=\"Cap to temporal layer 0\" style=\"width: 33%\">TL 0</button>' + '\t\t</div>' + '\t</div>' + '</div>'); // Enable the simulcast selection buttons\n\n      $('#sl-0').removeClass('btn-primary btn-success').addClass('btn-primary').unbind('click').click(function () {\n        toastr.info(\"Switching simulcast substream, wait for it... (lower quality)\", null, {\n          timeOut: 2000\n        });\n        if (!$('#sl-2').hasClass('btn-success')) $('#sl-2').removeClass('btn-primary btn-info').addClass('btn-primary');\n        if (!$('#sl-1').hasClass('btn-success')) $('#sl-1').removeClass('btn-primary btn-info').addClass('btn-primary');\n        $('#sl-0').removeClass('btn-primary btn-info btn-success').addClass('btn-info');\n        streaming.send({\n          message: {\n            request: \"configure\",\n            substream: 0\n          }\n        });\n      });\n      $('#sl-1').removeClass('btn-primary btn-success').addClass('btn-primary').unbind('click').click(function () {\n        toastr.info(\"Switching simulcast substream, wait for it... (normal quality)\", null, {\n          timeOut: 2000\n        });\n        if (!$('#sl-2').hasClass('btn-success')) $('#sl-2').removeClass('btn-primary btn-info').addClass('btn-primary');\n        $('#sl-1').removeClass('btn-primary btn-info btn-success').addClass('btn-info');\n        if (!$('#sl-0').hasClass('btn-success')) $('#sl-0').removeClass('btn-primary btn-info').addClass('btn-primary');\n        streaming.send({\n          message: {\n            request: \"configure\",\n            substream: 1\n          }\n        });\n      });\n      $('#sl-2').removeClass('btn-primary btn-success').addClass('btn-primary').unbind('click').click(function () {\n        toastr.info(\"Switching simulcast substream, wait for it... (higher quality)\", null, {\n          timeOut: 2000\n        });\n        $('#sl-2').removeClass('btn-primary btn-info btn-success').addClass('btn-info');\n        if (!$('#sl-1').hasClass('btn-success')) $('#sl-1').removeClass('btn-primary btn-info').addClass('btn-primary');\n        if (!$('#sl-0').hasClass('btn-success')) $('#sl-0').removeClass('btn-primary btn-info').addClass('btn-primary');\n        streaming.send({\n          message: {\n            request: \"configure\",\n            substream: 2\n          }\n        });\n      });\n      if (!temporal) // No temporal layer support\n        return;\n      $('#tl-0').parent().removeClass('hide');\n      $('#tl-0').removeClass('btn-primary btn-success').addClass('btn-primary').unbind('click').click(function () {\n        toastr.info(\"Capping simulcast temporal layer, wait for it... (lowest FPS)\", null, {\n          timeOut: 2000\n        });\n        if (!$('#tl-2').hasClass('btn-success')) $('#tl-2').removeClass('btn-primary btn-info').addClass('btn-primary');\n        if (!$('#tl-1').hasClass('btn-success')) $('#tl-1').removeClass('btn-primary btn-info').addClass('btn-primary');\n        $('#tl-0').removeClass('btn-primary btn-info btn-success').addClass('btn-info');\n        streaming.send({\n          message: {\n            request: \"configure\",\n            temporal: 0\n          }\n        });\n      });\n      $('#tl-1').removeClass('btn-primary btn-success').addClass('btn-primary').unbind('click').click(function () {\n        toastr.info(\"Capping simulcast temporal layer, wait for it... (medium FPS)\", null, {\n          timeOut: 2000\n        });\n        if (!$('#tl-2').hasClass('btn-success')) $('#tl-2').removeClass('btn-primary btn-info').addClass('btn-primary');\n        $('#tl-1').removeClass('btn-primary btn-info').addClass('btn-info');\n        if (!$('#tl-0').hasClass('btn-success')) $('#tl-0').removeClass('btn-primary btn-info').addClass('btn-primary');\n        streaming.send({\n          message: {\n            request: \"configure\",\n            temporal: 1\n          }\n        });\n      });\n      $('#tl-2').removeClass('btn-primary btn-success').addClass('btn-primary').unbind('click').click(function () {\n        toastr.info(\"Capping simulcast temporal layer, wait for it... (highest FPS)\", null, {\n          timeOut: 2000\n        });\n        $('#tl-2').removeClass('btn-primary btn-info btn-success').addClass('btn-info');\n        if (!$('#tl-1').hasClass('btn-success')) $('#tl-1').removeClass('btn-primary btn-info').addClass('btn-primary');\n        if (!$('#tl-0').hasClass('btn-success')) $('#tl-0').removeClass('btn-primary btn-info').addClass('btn-primary');\n        streaming.send({\n          message: {\n            request: \"configure\",\n            temporal: 2\n          }\n        });\n      });\n    }\n\n    function updateSimulcastButtons(substream, temporal) {\n      // Check the substream\n      if (substream === 0) {\n        toastr.success(\"Switched simulcast substream! (lower quality)\", null, {\n          timeOut: 2000\n        });\n        $('#sl-2').removeClass('btn-primary btn-success').addClass('btn-primary');\n        $('#sl-1').removeClass('btn-primary btn-success').addClass('btn-primary');\n        $('#sl-0').removeClass('btn-primary btn-info btn-success').addClass('btn-success');\n      } else if (substream === 1) {\n        toastr.success(\"Switched simulcast substream! (normal quality)\", null, {\n          timeOut: 2000\n        });\n        $('#sl-2').removeClass('btn-primary btn-success').addClass('btn-primary');\n        $('#sl-1').removeClass('btn-primary btn-info btn-success').addClass('btn-success');\n        $('#sl-0').removeClass('btn-primary btn-success').addClass('btn-primary');\n      } else if (substream === 2) {\n        toastr.success(\"Switched simulcast substream! (higher quality)\", null, {\n          timeOut: 2000\n        });\n        $('#sl-2').removeClass('btn-primary btn-info btn-success').addClass('btn-success');\n        $('#sl-1').removeClass('btn-primary btn-success').addClass('btn-primary');\n        $('#sl-0').removeClass('btn-primary btn-success').addClass('btn-primary');\n      } // Check the temporal layer\n\n\n      if (temporal === 0) {\n        toastr.success(\"Capped simulcast temporal layer! (lowest FPS)\", null, {\n          timeOut: 2000\n        });\n        $('#tl-2').removeClass('btn-primary btn-success').addClass('btn-primary');\n        $('#tl-1').removeClass('btn-primary btn-success').addClass('btn-primary');\n        $('#tl-0').removeClass('btn-primary btn-info btn-success').addClass('btn-success');\n      } else if (temporal === 1) {\n        toastr.success(\"Capped simulcast temporal layer! (medium FPS)\", null, {\n          timeOut: 2000\n        });\n        $('#tl-2').removeClass('btn-primary btn-success').addClass('btn-primary');\n        $('#tl-1').removeClass('btn-primary btn-info btn-success').addClass('btn-success');\n        $('#tl-0').removeClass('btn-primary btn-success').addClass('btn-primary');\n      } else if (temporal === 2) {\n        toastr.success(\"Capped simulcast temporal layer! (highest FPS)\", null, {\n          timeOut: 2000\n        });\n        $('#tl-2').removeClass('btn-primary btn-info btn-success').addClass('btn-success');\n        $('#tl-1').removeClass('btn-primary btn-success').addClass('btn-primary');\n        $('#tl-0').removeClass('btn-primary btn-success').addClass('btn-primary');\n      }\n    } // Helpers to create SVC-related UI for a new viewer\n\n\n    function addSvcButtons() {\n      if ($('#svc').length > 0) return;\n      $('#curres').parent().append('<div id=\"svc\" class=\"btn-group-vertical btn-group-vertical-xs pull-right\">' + '\t<div class\"row\">' + '\t\t<div class=\"btn-group btn-group-xs\" style=\"width: 100%\">' + '\t\t\t<button id=\"sl-1\" type=\"button\" class=\"btn btn-primary\" data-toggle=\"tooltip\" title=\"Switch to normal resolution\" style=\"width: 50%\">SL 1</button>' + '\t\t\t<button id=\"sl-0\" type=\"button\" class=\"btn btn-primary\" data-toggle=\"tooltip\" title=\"Switch to low resolution\" style=\"width: 50%\">SL 0</button>' + '\t\t</div>' + '\t</div>' + '\t<div class\"row\">' + '\t\t<div class=\"btn-group btn-group-xs\" style=\"width: 100%\">' + '\t\t\t<button id=\"tl-2\" type=\"button\" class=\"btn btn-primary\" data-toggle=\"tooltip\" title=\"Cap to temporal layer 2 (high FPS)\" style=\"width: 34%\">TL 2</button>' + '\t\t\t<button id=\"tl-1\" type=\"button\" class=\"btn btn-primary\" data-toggle=\"tooltip\" title=\"Cap to temporal layer 1 (medium FPS)\" style=\"width: 33%\">TL 1</button>' + '\t\t\t<button id=\"tl-0\" type=\"button\" class=\"btn btn-primary\" data-toggle=\"tooltip\" title=\"Cap to temporal layer 0 (low FPS)\" style=\"width: 33%\">TL 0</button>' + '\t\t</div>' + '\t</div>' + '</div>'); // Enable the VP8 simulcast selection buttons\n\n      $('#sl-0').removeClass('btn-primary btn-success').addClass('btn-primary').unbind('click').click(function () {\n        toastr.info(\"Switching SVC spatial layer, wait for it... (low resolution)\", null, {\n          timeOut: 2000\n        });\n        if (!$('#sl-1').hasClass('btn-success')) $('#sl-1').removeClass('btn-primary btn-info').addClass('btn-primary');\n        $('#sl-0').removeClass('btn-primary btn-info btn-success').addClass('btn-info');\n        streaming.send({\n          message: {\n            request: \"configure\",\n            spatial_layer: 0\n          }\n        });\n      });\n      $('#sl-1').removeClass('btn-primary btn-success').addClass('btn-primary').unbind('click').click(function () {\n        toastr.info(\"Switching SVC spatial layer, wait for it... (normal resolution)\", null, {\n          timeOut: 2000\n        });\n        $('#sl-1').removeClass('btn-primary btn-info btn-success').addClass('btn-info');\n        if (!$('#sl-0').hasClass('btn-success')) $('#sl-0').removeClass('btn-primary btn-info').addClass('btn-primary');\n        streaming.send({\n          message: {\n            request: \"configure\",\n            spatial_layer: 1\n          }\n        });\n      });\n      $('#tl-0').removeClass('btn-primary btn-success').addClass('btn-primary').unbind('click').click(function () {\n        toastr.info(\"Capping SVC temporal layer, wait for it... (lowest FPS)\", null, {\n          timeOut: 2000\n        });\n        if (!$('#tl-2').hasClass('btn-success')) $('#tl-2').removeClass('btn-primary btn-info').addClass('btn-primary');\n        if (!$('#tl-1').hasClass('btn-success')) $('#tl-1').removeClass('btn-primary btn-info').addClass('btn-primary');\n        $('#tl-0').removeClass('btn-primary btn-info btn-success').addClass('btn-info');\n        streaming.send({\n          message: {\n            request: \"configure\",\n            temporal_layer: 0\n          }\n        });\n      });\n      $('#tl-1').removeClass('btn-primary btn-success').addClass('btn-primary').unbind('click').click(function () {\n        toastr.info(\"Capping SVC temporal layer, wait for it... (medium FPS)\", null, {\n          timeOut: 2000\n        });\n        if (!$('#tl-2').hasClass('btn-success')) $('#tl-2').removeClass('btn-primary btn-info').addClass('btn-primary');\n        $('#tl-1').removeClass('btn-primary btn-info').addClass('btn-info');\n        if (!$('#tl-0').hasClass('btn-success')) $('#tl-0').removeClass('btn-primary btn-info').addClass('btn-primary');\n        streaming.send({\n          message: {\n            request: \"configure\",\n            temporal_layer: 1\n          }\n        });\n      });\n      $('#tl-2').removeClass('btn-primary btn-success').addClass('btn-primary').unbind('click').click(function () {\n        toastr.info(\"Capping SVC temporal layer, wait for it... (highest FPS)\", null, {\n          timeOut: 2000\n        });\n        $('#tl-2').removeClass('btn-primary btn-info btn-success').addClass('btn-info');\n        if (!$('#tl-1').hasClass('btn-success')) $('#tl-1').removeClass('btn-primary btn-info').addClass('btn-primary');\n        if (!$('#tl-0').hasClass('btn-success')) $('#tl-0').removeClass('btn-primary btn-info').addClass('btn-primary');\n        streaming.send({\n          message: {\n            request: \"configure\",\n            temporal_layer: 2\n          }\n        });\n      });\n    }\n\n    function updateSvcButtons(spatial, temporal) {\n      // Check the spatial layer\n      if (spatial === 0) {\n        toastr.success(\"Switched SVC spatial layer! (lower resolution)\", null, {\n          timeOut: 2000\n        });\n        $('#sl-1').removeClass('btn-primary btn-success').addClass('btn-primary');\n        $('#sl-0').removeClass('btn-primary btn-info btn-success').addClass('btn-success');\n      } else if (spatial === 1) {\n        toastr.success(\"Switched SVC spatial layer! (normal resolution)\", null, {\n          timeOut: 2000\n        });\n        $('#sl-1').removeClass('btn-primary btn-info btn-success').addClass('btn-success');\n        $('#sl-0').removeClass('btn-primary btn-success').addClass('btn-primary');\n      } // Check the temporal layer\n\n\n      if (temporal === 0) {\n        toastr.success(\"Capped SVC temporal layer! (lowest FPS)\", null, {\n          timeOut: 2000\n        });\n        $('#tl-2').removeClass('btn-primary btn-success').addClass('btn-primary');\n        $('#tl-1').removeClass('btn-primary btn-success').addClass('btn-primary');\n        $('#tl-0').removeClass('btn-primary btn-info btn-success').addClass('btn-success');\n      } else if (temporal === 1) {\n        toastr.success(\"Capped SVC temporal layer! (medium FPS)\", null, {\n          timeOut: 2000\n        });\n        $('#tl-2').removeClass('btn-primary btn-success').addClass('btn-primary');\n        $('#tl-1').removeClass('btn-primary btn-info btn-success').addClass('btn-success');\n        $('#tl-0').removeClass('btn-primary btn-success').addClass('btn-primary');\n      } else if (temporal === 2) {\n        toastr.success(\"Capped SVC temporal layer! (highest FPS)\", null, {\n          timeOut: 2000\n        });\n        $('#tl-2').removeClass('btn-primary btn-info btn-success').addClass('btn-success');\n        $('#tl-1').removeClass('btn-primary btn-success').addClass('btn-primary');\n        $('#tl-0').removeClass('btn-primary btn-success').addClass('btn-primary');\n      }\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"meta\", {\n        charSet: \"utf-8\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 622,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"meta\", {\n        name: \"viewport\",\n        content: \"width=device-width, initial-scale=1.0\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 623,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"meta\", {\n        httpEquiv: \"Content-Type\",\n        content: \"text/html; charset=UTF-8\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 624,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"title\", {\n        children: \"Janus WebRTC Server: Streaming Demo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 625,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-12\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"page-header\",\n              children: /*#__PURE__*/_jsxDEV(\"h1\", {\n                children: [\"Plugin Demo: Streaming\", /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-default\",\n                  autoComplete: \"off\",\n                  id: \"start\",\n                  children: \"Start\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 631,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 630,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 629,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"container\",\n              id: \"details\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-md-12\",\n                  children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                    children: \"Demo details\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 637,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 636,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 635,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 634,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"container hide\",\n              id: \"streams\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-md-6\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"row\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"panel panel-default\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"panel-heading\",\n                      children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                        className: \"panel-title\",\n                        children: [\"Streams \", /*#__PURE__*/_jsxDEV(\"i\", {\n                          id: \"update-streams\",\n                          className: \"fa fa-refresh\",\n                          title: \"Update list of streams\",\n                          style: {\n                            cursor: 'pointer'\n                          }\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 646,\n                          columnNumber: 61\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 646,\n                        columnNumber: 25\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 645,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"panel-body\",\n                      id: \"list\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"btn-group btn-group-sm\",\n                        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                          className: \"btn btn-primary\",\n                          autoComplete: \"off\",\n                          id: \"watch\",\n                          children: \"Watch or Listen\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 650,\n                          columnNumber: 27\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"btn-group btn-group-sm\",\n                          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                            autoComplete: \"off\",\n                            id: \"streamset\",\n                            className: \"btn btn-default dropdown-toggle\",\n                            \"data-toggle\": \"dropdown\",\n                            children: [\"Streams list\", /*#__PURE__*/_jsxDEV(\"span\", {\n                              className: \"caret\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 654,\n                              columnNumber: 43\n                            }, this)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 653,\n                            columnNumber: 29\n                          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                            id: \"streamslist\",\n                            className: \"dropdown-menu\",\n                            role: \"menu\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 656,\n                            columnNumber: 29\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 652,\n                          columnNumber: 27\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 649,\n                        columnNumber: 25\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 648,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 644,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 643,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"row hide\",\n                  id: \"info\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"panel panel-default\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"panel-heading\",\n                      children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                        className: \"panel-title\",\n                        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                          className: \"fa fa-info-circle\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 666,\n                          columnNumber: 53\n                        }, this), \" Metadata\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 666,\n                        columnNumber: 25\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 665,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"panel-body\",\n                      children: /*#__PURE__*/_jsxDEV(\"pre\", {\n                        id: \"metadata\",\n                        style: {\n                          wordBreak: 'break-word'\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 669,\n                        columnNumber: 25\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 668,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 664,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 663,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 642,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-md-6\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"panel panel-default\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"panel-heading\",\n                    children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                      className: \"panel-title\",\n                      children: [\"Stream\", /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"label label-info hide\",\n                        id: \"status\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 678,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"label label-primary hide\",\n                        id: \"curres\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 679,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"label label-info hide\",\n                        id: \"curbitrate\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 680,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 677,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 676,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"panel-body\",\n                    id: \"stream\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 683,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 675,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 674,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 641,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 628,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 627,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 626,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 621,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\n;\nexport default Home;","map":{"version":3,"sources":["/home/abu/Documents/dev/experiments/exp1/client/src/components/home/Home.js"],"names":["React","Home","Component","constructor","props","componentDidMount","startJanusServerRoom","startJanusStreaming","server","window","location","protocol","hostname","janus","streaming","opaqueId","Janus","randomString","bitrateTimer","spinner","simulcastStarted","svcStarted","selectedStream","$","document","ready","init","debug","callback","one","attr","unbind","isWebrtcSupported","bootbox","alert","success","attach","plugin","pluginHandle","remove","log","getPlugin","getId","click","updateStreamsList","removeAttr","html","clearInterval","destroy","error","iceState","state","webrtcState","on","onmessage","msg","jsep","result","status","removeClass","text","show","stopStream","substream","temporal","undefined","addSimulcastButtons","remoteFeed","videoCodec","updateSimulcastButtons","spatial","addSvcButtons","updateSvcButtons","stereo","sdp","indexOf","createAnswer","media","audioSend","videoSend","data","customizeSdp","replace","body","request","send","message","onremotestream","stream","addButtons","length","append","get","volume","bind","videoWidth","stop","videoTracks","getVideoTracks","width","height","videoHeight","webRTCAdapter","browserDetails","browser","setTimeout","attachMediaStream","play","hide","setInterval","bitrate","getBitrate","ondataopen","ondata","val","oncleanup","empty","addClass","reload","destroyed","myInit","method","id","device","fetch","then","response","json","list","Array","isArray","sort","a","b","filter","includes","mp","parent","startStream","getStreamInfo","parseInt","info","metadata","target","getElementById","Spinner","top","spin","hangup","toastr","timeOut","hasClass","spatial_layer","temporal_layer","render","cursor","wordBreak"],"mappings":"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","sourcesContent":["import React from \"react\";\n\nclass Home extends React.Component {\n\n\n  constructor(props) {\n    super(props);\n  }\n\n  componentDidMount() {\n    this.startJanusServerRoom();\n  }\n\n  startJanusStreaming() {\n\n    var server = null;\n    if (window.location.protocol === 'http:')\n      server = \"http://\" + window.location.hostname + \":8088/janus\";\n    else\n      server = \"https://\" + window.location.hostname + \":8089/janus\";\n\n    var janus = null;\n    var streaming = null;\n    var opaqueId = \"streamingtest-\" + Janus.randomString(12);\n\n    var bitrateTimer = null;\n    var spinner = null;\n\n    var simulcastStarted = false, svcStarted = false;\n\n    var selectedStream = null;\n\n\n    $(document).ready(function () {\n      // Initialize the library (all console debuggers enabled)\n      Janus.init({\n        debug: \"all\", callback: function () {\n          // Use a button to start the demo\n          $('#start').one('click', function () {\n            $(this).attr('disabled', true).unbind('click');\n            // Make sure the browser supports WebRTC\n            if (!Janus.isWebrtcSupported()) {\n              bootbox.alert(\"No WebRTC support... \");\n              return;\n            }\n            // Create session\n            janus = new Janus(\n              {\n                server: server,\n                success: function () {\n                  // Attach to Streaming plugin\n                  janus.attach(\n                    {\n                      plugin: \"janus.plugin.streaming\",\n                      opaqueId: opaqueId,\n                      success: function (pluginHandle) {\n                        $('#details').remove();\n                        streaming = pluginHandle;\n                        Janus.log(\"Plugin attached! (\" + streaming.getPlugin() + \", id=\" + streaming.getId() + \")\");\n                        // Setup streaming session\n                        $('#update-streams').click(updateStreamsList);\n                        updateStreamsList();\n                        $('#start').removeAttr('disabled').html(\"Stop\")\n                          .click(function () {\n                            $(this).attr('disabled', true);\n                            clearInterval(bitrateTimer);\n                            janus.destroy();\n                            $('#streamslist').attr('disabled', true);\n                            $('#watch').attr('disabled', true).unbind('click');\n                            $('#start').attr('disabled', true).html(\"Bye\").unbind('click');\n                          });\n                      },\n                      error: function (error) {\n                        Janus.error(\"  -- Error attaching plugin... \", error);\n                        bootbox.alert(\"Error attaching plugin... \" + error);\n                      },\n                      iceState: function (state) {\n                        Janus.log(\"ICE state changed to \" + state);\n                      },\n                      webrtcState: function (on) {\n                        Janus.log(\"Janus says our WebRTC PeerConnection is \" + (on ? \"up\" : \"down\") + \" now\");\n                      },\n                      onmessage: function (msg, jsep) {\n                        Janus.debug(\" ::: Got a message :::\", msg);\n                        var result = msg[\"result\"];\n                        if (result) {\n                          if (result[\"status\"]) {\n                            var status = result[\"status\"];\n                            if (status === 'starting')\n                              $('#status').removeClass('hide').text(\"Starting, please wait...\").show();\n                            else if (status === 'started')\n                              $('#status').removeClass('hide').text(\"Started\").show();\n                            else if (status === 'stopped')\n                              stopStream();\n                          } else if (msg[\"streaming\"] === \"event\") {\n                            // Is simulcast in place?\n                            var substream = result[\"substream\"];\n                            var temporal = result[\"temporal\"];\n                            if ((substream !== null && substream !== undefined) || (temporal !== null && temporal !== undefined)) {\n                              if (!simulcastStarted) {\n                                simulcastStarted = true;\n                                addSimulcastButtons(remoteFeed.videoCodec === \"vp8\");\n                              }\n                              // We just received notice that there's been a switch, update the buttons\n                              updateSimulcastButtons(substream, temporal);\n                            }\n                            // Is VP9/SVC in place?\n                            var spatial = result[\"spatial_layer\"];\n                            temporal = result[\"temporal_layer\"];\n                            if ((spatial !== null && spatial !== undefined) || (temporal !== null && temporal !== undefined)) {\n                              if (!svcStarted) {\n                                svcStarted = true;\n                                addSvcButtons();\n                              }\n                              // We just received notice that there's been a switch, update the buttons\n                              updateSvcButtons(spatial, temporal);\n                            }\n                          }\n                        } else if (msg[\"error\"]) {\n                          bootbox.alert(msg[\"error\"]);\n                          stopStream();\n                          return;\n                        }\n                        if (jsep) {\n                          Janus.debug(\"Handling SDP as well...\", jsep);\n                          var stereo = (jsep.sdp.indexOf(\"stereo=1\") !== -1);\n                          // Offer from the plugin, let's answer\n                          streaming.createAnswer(\n                            {\n                              jsep: jsep,\n                              // We want recvonly audio/video and, if negotiated, datachannels\n                              media: { audioSend: false, videoSend: false, data: true },\n                              customizeSdp: function (jsep) {\n                                if (stereo && jsep.sdp.indexOf(\"stereo=1\") == -1) {\n                                  // Make sure that our offer contains stereo too\n                                  jsep.sdp = jsep.sdp.replace(\"useinbandfec=1\", \"useinbandfec=1;stereo=1\");\n                                }\n                              },\n                              success: function (jsep) {\n                                Janus.debug(\"Got SDP!\", jsep);\n                                var body = { request: \"start\" };\n                                streaming.send({ message: body, jsep: jsep });\n                                $('#watch').html(\"Stop\").removeAttr('disabled').click(stopStream);\n                              },\n                              error: function (error) {\n                                Janus.error(\"WebRTC error:\", error);\n                                bootbox.alert(\"WebRTC error... \" + error.message);\n                              }\n                            });\n                        }\n                      },\n                      onremotestream: function (stream) {\n                        Janus.debug(\" ::: Got a remote stream :::\", stream);\n                        var addButtons = false;\n                        if ($('#remotevideo').length === 0) {\n                          addButtons = true;\n                          $('#stream').append('<video class=\"rounded centered hide\" id=\"remotevideo\" width=\"100%\" height=\"100%\" playsinline/>');\n                          $('#remotevideo').get(0).volume = 0;\n                          // Show the stream and hide the spinner when we get a playing event\n                          $(\"#remotevideo\").bind(\"playing\", function () {\n                            $('#waitingvideo').remove();\n                            if (this.videoWidth)\n                              $('#remotevideo').removeClass('hide').show();\n                            if (spinner)\n                              spinner.stop();\n                            spinner = null;\n                            var videoTracks = stream.getVideoTracks();\n                            if (!videoTracks || videoTracks.length === 0)\n                              return;\n                            var width = this.videoWidth;\n                            var height = this.videoHeight;\n                            $('#curres').removeClass('hide').text(width + 'x' + height).show();\n                            if (Janus.webRTCAdapter.browserDetails.browser === \"firefox\") {\n                              // Firefox Stable has a bug: width and height are not immediately available after a playing\n                              setTimeout(function () {\n                                var width = $(\"#remotevideo\").get(0).videoWidth;\n                                var height = $(\"#remotevideo\").get(0).videoHeight;\n                                $('#curres').removeClass('hide').text(width + 'x' + height).show();\n                              }, 2000);\n                            }\n                          });\n                        }\n                        Janus.attachMediaStream($('#remotevideo').get(0), stream);\n                        $(\"#remotevideo\").get(0).play();\n                        $(\"#remotevideo\").get(0).volume = 1;\n                        var videoTracks = stream.getVideoTracks();\n                        if (!videoTracks || videoTracks.length === 0) {\n                          // No remote video\n                          $('#remotevideo').hide();\n                          if ($('#stream .no-video-container').length === 0) {\n                            $('#stream').append(\n                              '<div class=\"no-video-container\">' +\n                              '<i class=\"fa fa-video-camera fa-5 no-video-icon\"></i>' +\n                              '<span class=\"no-video-text\">No remote video available</span>' +\n                              '</div>');\n                          }\n                        } else {\n                          $('#stream .no-video-container').remove();\n                          $('#remotevideo').removeClass('hide').show();\n                        }\n                        if (!addButtons)\n                          return;\n                        if (videoTracks && videoTracks.length &&\n                          (Janus.webRTCAdapter.browserDetails.browser === \"chrome\" ||\n                            Janus.webRTCAdapter.browserDetails.browser === \"firefox\" ||\n                            Janus.webRTCAdapter.browserDetails.browser === \"safari\")) {\n                          $('#curbitrate').removeClass('hide').show();\n                          bitrateTimer = setInterval(function () {\n                            // Display updated bitrate, if supported\n                            var bitrate = streaming.getBitrate();\n                            $('#curbitrate').text(bitrate);\n                            // Check if the resolution changed too\n                            var width = $(\"#remotevideo\").get(0).videoWidth;\n                            var height = $(\"#remotevideo\").get(0).videoHeight;\n                            if (width > 0 && height > 0)\n                              $('#curres').removeClass('hide').text(width + 'x' + height).show();\n                          }, 1000);\n                        }\n                      },\n                      ondataopen: function (data) {\n                        Janus.log(\"The DataChannel is available!\");\n                        $('#waitingvideo').remove();\n                        $('#stream').append(\n                          '<input class=\"form-control\" type=\"text\" id=\"datarecv\" disabled></input>'\n                        );\n                        if (spinner)\n                          spinner.stop();\n                        spinner = null;\n                      },\n                      ondata: function (data) {\n                        Janus.debug(\"We got data from the DataChannel!\", data);\n                        $('#datarecv').val(data);\n                      },\n                      oncleanup: function () {\n                        Janus.log(\" ::: Got a cleanup notification :::\");\n                        $('#waitingvideo').remove();\n                        $('#remotevideo').remove();\n                        $('#datarecv').remove();\n                        $('.no-video-container').remove();\n                        $('#bitrate').attr('disabled', true);\n                        $('#bitrateset').html('Bandwidth<span class=\"caret\"></span>');\n                        $('#curbitrate').hide();\n                        if (bitrateTimer)\n                          clearInterval(bitrateTimer);\n                        bitrateTimer = null;\n                        $('#curres').hide();\n                        $('#simulcast').remove();\n                        $('#metadata').empty();\n                        $('#info').addClass('hide').hide();\n                        simulcastStarted = false;\n                      }\n                    });\n                },\n                error: function (error) {\n                  Janus.error(error);\n                  bootbox.alert(error, function () {\n                    window.location.reload();\n                  });\n                },\n                destroyed: function () {\n                  window.location.reload();\n                }\n              });\n          });\n        }\n      });\n    });\n\n    async function updateStreamsList() {\n      Janus.debug(\"updateStreamsList\")\n\n      const myInit = {\n        method: 'GET'\n      }\n      // fetch api \n\n      //const id = '60c07f7c360386d21c4ba0eb'; // fetch id\n      const id = '60d44ebac53d31346858c759'\n      const device = await fetch(`http://localhost:5003/auth/users/${id}/device`, myInit)\n        .then(response => response.json())\n        .then(data => data.device);\n\n      Janus.log(\"fetched device \", device);\n\n      $('#update-streams').unbind('click').addClass('fa-spin');\n      var body = { request: \"list\" };\n      Janus.debug(\"Sending message:\", body);\n      streaming.send({\n        message: body, success: function (result) {\n          setTimeout(function () {\n            $('#update-streams').removeClass('fa-spin').click(updateStreamsList);\n          }, 500);\n          if (!result) {\n            bootbox.alert(\"Got no response to our query for available streams\");\n            return;\n          }\n          if (result[\"list\"]) {\n            $('#streams').removeClass('hide').show();\n            $('#streamslist').empty();\n            $('#watch').attr('disabled', true).unbind('click');\n            var list = result[\"list\"];\n            Janus.log(\"Got a list of available streams\");\n            if (list && Array.isArray(list)) {\n              list.sort(function (a, b) {\n                if (!a || a.id < (b ? b.id : 0))\n                  return -1;\n                if (!b || b.id < (a ? a.id : 0))\n                  return 1;\n                return 0;\n              });\n            }\n            Janus.debug(list);\n\n            list = list.filter(stream => device.includes(stream.id + \"\"));\n\n            Janus.log(\"filtered list : \", list);\n\n            for (var mp in list) {\n              Janus.debug(\"  >> [\" + list[mp][\"id\"] + \"] \" + list[mp][\"description\"] + \" (\" + list[mp][\"type\"] + \")\");\n              $('#streamslist').append(\"<li><a href='#' id='\" + list[mp][\"id\"] + \"'>\" + list[mp][\"description\"] + \" (\" + list[mp][\"type\"] + \")\" + \"</a></li>\");\n            }\n            $('#streamslist a').unbind('click').click(function () {\n              selectedStream = $(this).attr(\"id\");\n              $('#streamset').html($(this).html()).parent().removeClass('open');\n              return false;\n\n            });\n            $('#watch').removeAttr('disabled').unbind('click').click(startStream);\n          }\n        }\n      });\n    }\n\n    function getStreamInfo() {\n      $('#metadata').empty();\n      $('#info').addClass('hide').hide();\n      if (!selectedStream)\n        return;\n      // Send a request for more info on the mountpoint we subscribed to\n      var body = { request: \"info\", id: parseInt(selectedStream) || selectedStream };\n      streaming.send({\n        message: body, success: function (result) {\n          if (result && result.info && result.info.metadata) {\n            $('#metadata').html(result.info.metadata);\n            $('#info').removeClass('hide').show();\n          }\n        }\n      });\n    }\n\n    function startStream() {\n      Janus.log(\"Selected video id #\" + selectedStream);\n      if (!selectedStream) {\n        bootbox.alert(\"Select a stream from the list\");\n        return;\n      }\n      $('#streamset').attr('disabled', true);\n      $('#streamslist').attr('disabled', true);\n      $('#watch').attr('disabled', true).unbind('click');\n      var body = { request: \"watch\", id: parseInt(selectedStream) || selectedStream };\n      streaming.send({ message: body });\n      // No remote video yet\n      $('#stream').append('<video class=\"rounded centered\" id=\"waitingvideo\" width=\"100%\" height=\"100%\" />');\n      if (spinner == null) {\n        var target = document.getElementById('stream');\n        spinner = new Spinner({ top: 100 }).spin(target);\n      } else {\n        spinner.spin();\n      }\n      // Get some more info for the mountpoint to display, if any\n      getStreamInfo();\n    }\n\n    function stopStream() {\n      $('#watch').attr('disabled', true).unbind('click');\n      var body = { request: \"stop\" };\n      streaming.send({ message: body });\n      streaming.hangup();\n      $('#streamset').removeAttr('disabled');\n      $('#streamslist').removeAttr('disabled');\n      $('#watch').html(\"Watch or Listen\").removeAttr('disabled').unbind('click').click(startStream);\n      $('#status').empty().hide();\n      $('#bitrate').attr('disabled', true);\n      $('#bitrateset').html('Bandwidth<span class=\"caret\"></span>');\n      $('#curbitrate').hide();\n      if (bitrateTimer)\n        clearInterval(bitrateTimer);\n      bitrateTimer = null;\n      $('#curres').empty().hide();\n      $('#simulcast').remove();\n      simulcastStarted = false;\n    }\n\n    // Helpers to create Simulcast-related UI, if enabled\n    function addSimulcastButtons(temporal) {\n      $('#curres').parent().append(\n        '<div id=\"simulcast\" class=\"btn-group-vertical btn-group-vertical-xs pull-right\">' +\n        '\t<div class\"row\">' +\n        '\t\t<div class=\"btn-group btn-group-xs\" style=\"width: 100%\">' +\n        '\t\t\t<button id=\"sl-2\" type=\"button\" class=\"btn btn-primary\" data-toggle=\"tooltip\" title=\"Switch to higher quality\" style=\"width: 33%\">SL 2</button>' +\n        '\t\t\t<button id=\"sl-1\" type=\"button\" class=\"btn btn-primary\" data-toggle=\"tooltip\" title=\"Switch to normal quality\" style=\"width: 33%\">SL 1</button>' +\n        '\t\t\t<button id=\"sl-0\" type=\"button\" class=\"btn btn-primary\" data-toggle=\"tooltip\" title=\"Switch to lower quality\" style=\"width: 34%\">SL 0</button>' +\n        '\t\t</div>' +\n        '\t</div>' +\n        '\t<div class\"row\">' +\n        '\t\t<div class=\"btn-group btn-group-xs hide\" style=\"width: 100%\">' +\n        '\t\t\t<button id=\"tl-2\" type=\"button\" class=\"btn btn-primary\" data-toggle=\"tooltip\" title=\"Cap to temporal layer 2\" style=\"width: 34%\">TL 2</button>' +\n        '\t\t\t<button id=\"tl-1\" type=\"button\" class=\"btn btn-primary\" data-toggle=\"tooltip\" title=\"Cap to temporal layer 1\" style=\"width: 33%\">TL 1</button>' +\n        '\t\t\t<button id=\"tl-0\" type=\"button\" class=\"btn btn-primary\" data-toggle=\"tooltip\" title=\"Cap to temporal layer 0\" style=\"width: 33%\">TL 0</button>' +\n        '\t\t</div>' +\n        '\t</div>' +\n        '</div>');\n      // Enable the simulcast selection buttons\n      $('#sl-0').removeClass('btn-primary btn-success').addClass('btn-primary')\n        .unbind('click').click(function () {\n          toastr.info(\"Switching simulcast substream, wait for it... (lower quality)\", null, { timeOut: 2000 });\n          if (!$('#sl-2').hasClass('btn-success'))\n            $('#sl-2').removeClass('btn-primary btn-info').addClass('btn-primary');\n          if (!$('#sl-1').hasClass('btn-success'))\n            $('#sl-1').removeClass('btn-primary btn-info').addClass('btn-primary');\n          $('#sl-0').removeClass('btn-primary btn-info btn-success').addClass('btn-info');\n          streaming.send({ message: { request: \"configure\", substream: 0 } });\n        });\n      $('#sl-1').removeClass('btn-primary btn-success').addClass('btn-primary')\n        .unbind('click').click(function () {\n          toastr.info(\"Switching simulcast substream, wait for it... (normal quality)\", null, { timeOut: 2000 });\n          if (!$('#sl-2').hasClass('btn-success'))\n            $('#sl-2').removeClass('btn-primary btn-info').addClass('btn-primary');\n          $('#sl-1').removeClass('btn-primary btn-info btn-success').addClass('btn-info');\n          if (!$('#sl-0').hasClass('btn-success'))\n            $('#sl-0').removeClass('btn-primary btn-info').addClass('btn-primary');\n          streaming.send({ message: { request: \"configure\", substream: 1 } });\n        });\n      $('#sl-2').removeClass('btn-primary btn-success').addClass('btn-primary')\n        .unbind('click').click(function () {\n          toastr.info(\"Switching simulcast substream, wait for it... (higher quality)\", null, { timeOut: 2000 });\n          $('#sl-2').removeClass('btn-primary btn-info btn-success').addClass('btn-info');\n          if (!$('#sl-1').hasClass('btn-success'))\n            $('#sl-1').removeClass('btn-primary btn-info').addClass('btn-primary');\n          if (!$('#sl-0').hasClass('btn-success'))\n            $('#sl-0').removeClass('btn-primary btn-info').addClass('btn-primary');\n          streaming.send({ message: { request: \"configure\", substream: 2 } });\n        });\n      if (!temporal)\t// No temporal layer support\n        return;\n      $('#tl-0').parent().removeClass('hide');\n      $('#tl-0').removeClass('btn-primary btn-success').addClass('btn-primary')\n        .unbind('click').click(function () {\n          toastr.info(\"Capping simulcast temporal layer, wait for it... (lowest FPS)\", null, { timeOut: 2000 });\n          if (!$('#tl-2').hasClass('btn-success'))\n            $('#tl-2').removeClass('btn-primary btn-info').addClass('btn-primary');\n          if (!$('#tl-1').hasClass('btn-success'))\n            $('#tl-1').removeClass('btn-primary btn-info').addClass('btn-primary');\n          $('#tl-0').removeClass('btn-primary btn-info btn-success').addClass('btn-info');\n          streaming.send({ message: { request: \"configure\", temporal: 0 } });\n        });\n      $('#tl-1').removeClass('btn-primary btn-success').addClass('btn-primary')\n        .unbind('click').click(function () {\n          toastr.info(\"Capping simulcast temporal layer, wait for it... (medium FPS)\", null, { timeOut: 2000 });\n          if (!$('#tl-2').hasClass('btn-success'))\n            $('#tl-2').removeClass('btn-primary btn-info').addClass('btn-primary');\n          $('#tl-1').removeClass('btn-primary btn-info').addClass('btn-info');\n          if (!$('#tl-0').hasClass('btn-success'))\n            $('#tl-0').removeClass('btn-primary btn-info').addClass('btn-primary');\n          streaming.send({ message: { request: \"configure\", temporal: 1 } });\n        });\n      $('#tl-2').removeClass('btn-primary btn-success').addClass('btn-primary')\n        .unbind('click').click(function () {\n          toastr.info(\"Capping simulcast temporal layer, wait for it... (highest FPS)\", null, { timeOut: 2000 });\n          $('#tl-2').removeClass('btn-primary btn-info btn-success').addClass('btn-info');\n          if (!$('#tl-1').hasClass('btn-success'))\n            $('#tl-1').removeClass('btn-primary btn-info').addClass('btn-primary');\n          if (!$('#tl-0').hasClass('btn-success'))\n            $('#tl-0').removeClass('btn-primary btn-info').addClass('btn-primary');\n          streaming.send({ message: { request: \"configure\", temporal: 2 } });\n        });\n    }\n\n    function updateSimulcastButtons(substream, temporal) {\n      // Check the substream\n      if (substream === 0) {\n        toastr.success(\"Switched simulcast substream! (lower quality)\", null, { timeOut: 2000 });\n        $('#sl-2').removeClass('btn-primary btn-success').addClass('btn-primary');\n        $('#sl-1').removeClass('btn-primary btn-success').addClass('btn-primary');\n        $('#sl-0').removeClass('btn-primary btn-info btn-success').addClass('btn-success');\n      } else if (substream === 1) {\n        toastr.success(\"Switched simulcast substream! (normal quality)\", null, { timeOut: 2000 });\n        $('#sl-2').removeClass('btn-primary btn-success').addClass('btn-primary');\n        $('#sl-1').removeClass('btn-primary btn-info btn-success').addClass('btn-success');\n        $('#sl-0').removeClass('btn-primary btn-success').addClass('btn-primary');\n      } else if (substream === 2) {\n        toastr.success(\"Switched simulcast substream! (higher quality)\", null, { timeOut: 2000 });\n        $('#sl-2').removeClass('btn-primary btn-info btn-success').addClass('btn-success');\n        $('#sl-1').removeClass('btn-primary btn-success').addClass('btn-primary');\n        $('#sl-0').removeClass('btn-primary btn-success').addClass('btn-primary');\n      }\n      // Check the temporal layer\n      if (temporal === 0) {\n        toastr.success(\"Capped simulcast temporal layer! (lowest FPS)\", null, { timeOut: 2000 });\n        $('#tl-2').removeClass('btn-primary btn-success').addClass('btn-primary');\n        $('#tl-1').removeClass('btn-primary btn-success').addClass('btn-primary');\n        $('#tl-0').removeClass('btn-primary btn-info btn-success').addClass('btn-success');\n      } else if (temporal === 1) {\n        toastr.success(\"Capped simulcast temporal layer! (medium FPS)\", null, { timeOut: 2000 });\n        $('#tl-2').removeClass('btn-primary btn-success').addClass('btn-primary');\n        $('#tl-1').removeClass('btn-primary btn-info btn-success').addClass('btn-success');\n        $('#tl-0').removeClass('btn-primary btn-success').addClass('btn-primary');\n      } else if (temporal === 2) {\n        toastr.success(\"Capped simulcast temporal layer! (highest FPS)\", null, { timeOut: 2000 });\n        $('#tl-2').removeClass('btn-primary btn-info btn-success').addClass('btn-success');\n        $('#tl-1').removeClass('btn-primary btn-success').addClass('btn-primary');\n        $('#tl-0').removeClass('btn-primary btn-success').addClass('btn-primary');\n      }\n    }\n\n    // Helpers to create SVC-related UI for a new viewer\n    function addSvcButtons() {\n      if ($('#svc').length > 0)\n        return;\n      $('#curres').parent().append(\n        '<div id=\"svc\" class=\"btn-group-vertical btn-group-vertical-xs pull-right\">' +\n        '\t<div class\"row\">' +\n        '\t\t<div class=\"btn-group btn-group-xs\" style=\"width: 100%\">' +\n        '\t\t\t<button id=\"sl-1\" type=\"button\" class=\"btn btn-primary\" data-toggle=\"tooltip\" title=\"Switch to normal resolution\" style=\"width: 50%\">SL 1</button>' +\n        '\t\t\t<button id=\"sl-0\" type=\"button\" class=\"btn btn-primary\" data-toggle=\"tooltip\" title=\"Switch to low resolution\" style=\"width: 50%\">SL 0</button>' +\n        '\t\t</div>' +\n        '\t</div>' +\n        '\t<div class\"row\">' +\n        '\t\t<div class=\"btn-group btn-group-xs\" style=\"width: 100%\">' +\n        '\t\t\t<button id=\"tl-2\" type=\"button\" class=\"btn btn-primary\" data-toggle=\"tooltip\" title=\"Cap to temporal layer 2 (high FPS)\" style=\"width: 34%\">TL 2</button>' +\n        '\t\t\t<button id=\"tl-1\" type=\"button\" class=\"btn btn-primary\" data-toggle=\"tooltip\" title=\"Cap to temporal layer 1 (medium FPS)\" style=\"width: 33%\">TL 1</button>' +\n        '\t\t\t<button id=\"tl-0\" type=\"button\" class=\"btn btn-primary\" data-toggle=\"tooltip\" title=\"Cap to temporal layer 0 (low FPS)\" style=\"width: 33%\">TL 0</button>' +\n        '\t\t</div>' +\n        '\t</div>' +\n        '</div>'\n      );\n      // Enable the VP8 simulcast selection buttons\n      $('#sl-0').removeClass('btn-primary btn-success').addClass('btn-primary')\n        .unbind('click').click(function () {\n          toastr.info(\"Switching SVC spatial layer, wait for it... (low resolution)\", null, { timeOut: 2000 });\n          if (!$('#sl-1').hasClass('btn-success'))\n            $('#sl-1').removeClass('btn-primary btn-info').addClass('btn-primary');\n          $('#sl-0').removeClass('btn-primary btn-info btn-success').addClass('btn-info');\n          streaming.send({ message: { request: \"configure\", spatial_layer: 0 } });\n        });\n      $('#sl-1').removeClass('btn-primary btn-success').addClass('btn-primary')\n        .unbind('click').click(function () {\n          toastr.info(\"Switching SVC spatial layer, wait for it... (normal resolution)\", null, { timeOut: 2000 });\n          $('#sl-1').removeClass('btn-primary btn-info btn-success').addClass('btn-info');\n          if (!$('#sl-0').hasClass('btn-success'))\n            $('#sl-0').removeClass('btn-primary btn-info').addClass('btn-primary');\n          streaming.send({ message: { request: \"configure\", spatial_layer: 1 } });\n        });\n      $('#tl-0').removeClass('btn-primary btn-success').addClass('btn-primary')\n        .unbind('click').click(function () {\n          toastr.info(\"Capping SVC temporal layer, wait for it... (lowest FPS)\", null, { timeOut: 2000 });\n          if (!$('#tl-2').hasClass('btn-success'))\n            $('#tl-2').removeClass('btn-primary btn-info').addClass('btn-primary');\n          if (!$('#tl-1').hasClass('btn-success'))\n            $('#tl-1').removeClass('btn-primary btn-info').addClass('btn-primary');\n          $('#tl-0').removeClass('btn-primary btn-info btn-success').addClass('btn-info');\n          streaming.send({ message: { request: \"configure\", temporal_layer: 0 } });\n        });\n      $('#tl-1').removeClass('btn-primary btn-success').addClass('btn-primary')\n        .unbind('click').click(function () {\n          toastr.info(\"Capping SVC temporal layer, wait for it... (medium FPS)\", null, { timeOut: 2000 });\n          if (!$('#tl-2').hasClass('btn-success'))\n            $('#tl-2').removeClass('btn-primary btn-info').addClass('btn-primary');\n          $('#tl-1').removeClass('btn-primary btn-info').addClass('btn-info');\n          if (!$('#tl-0').hasClass('btn-success'))\n            $('#tl-0').removeClass('btn-primary btn-info').addClass('btn-primary');\n          streaming.send({ message: { request: \"configure\", temporal_layer: 1 } });\n        });\n      $('#tl-2').removeClass('btn-primary btn-success').addClass('btn-primary')\n        .unbind('click').click(function () {\n          toastr.info(\"Capping SVC temporal layer, wait for it... (highest FPS)\", null, { timeOut: 2000 });\n          $('#tl-2').removeClass('btn-primary btn-info btn-success').addClass('btn-info');\n          if (!$('#tl-1').hasClass('btn-success'))\n            $('#tl-1').removeClass('btn-primary btn-info').addClass('btn-primary');\n          if (!$('#tl-0').hasClass('btn-success'))\n            $('#tl-0').removeClass('btn-primary btn-info').addClass('btn-primary');\n          streaming.send({ message: { request: \"configure\", temporal_layer: 2 } });\n        });\n    }\n\n    function updateSvcButtons(spatial, temporal) {\n      // Check the spatial layer\n      if (spatial === 0) {\n        toastr.success(\"Switched SVC spatial layer! (lower resolution)\", null, { timeOut: 2000 });\n        $('#sl-1').removeClass('btn-primary btn-success').addClass('btn-primary');\n        $('#sl-0').removeClass('btn-primary btn-info btn-success').addClass('btn-success');\n      } else if (spatial === 1) {\n        toastr.success(\"Switched SVC spatial layer! (normal resolution)\", null, { timeOut: 2000 });\n        $('#sl-1').removeClass('btn-primary btn-info btn-success').addClass('btn-success');\n        $('#sl-0').removeClass('btn-primary btn-success').addClass('btn-primary');\n      }\n      // Check the temporal layer\n      if (temporal === 0) {\n        toastr.success(\"Capped SVC temporal layer! (lowest FPS)\", null, { timeOut: 2000 });\n        $('#tl-2').removeClass('btn-primary btn-success').addClass('btn-primary');\n        $('#tl-1').removeClass('btn-primary btn-success').addClass('btn-primary');\n        $('#tl-0').removeClass('btn-primary btn-info btn-success').addClass('btn-success');\n      } else if (temporal === 1) {\n        toastr.success(\"Capped SVC temporal layer! (medium FPS)\", null, { timeOut: 2000 });\n        $('#tl-2').removeClass('btn-primary btn-success').addClass('btn-primary');\n        $('#tl-1').removeClass('btn-primary btn-info btn-success').addClass('btn-success');\n        $('#tl-0').removeClass('btn-primary btn-success').addClass('btn-primary');\n      } else if (temporal === 2) {\n        toastr.success(\"Capped SVC temporal layer! (highest FPS)\", null, { timeOut: 2000 });\n        $('#tl-2').removeClass('btn-primary btn-info btn-success').addClass('btn-success');\n        $('#tl-1').removeClass('btn-primary btn-success').addClass('btn-primary');\n        $('#tl-0').removeClass('btn-primary btn-success').addClass('btn-primary');\n      }\n    }\n\n\n\n  }\n  render() {\n    return (\n      <div>\n        <meta charSet=\"utf-8\" />\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n        <meta httpEquiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />\n        <title>Janus WebRTC Server: Streaming Demo</title>\n        <div className=\"container\">\n          <div className=\"row\">\n            <div className=\"col-md-12\">\n              <div className=\"page-header\">\n                <h1>Plugin Demo: Streaming\n                  <button className=\"btn btn-default\" autoComplete=\"off\" id=\"start\">Start</button>\n                </h1>\n              </div>\n              <div className=\"container\" id=\"details\">\n                <div className=\"row\">\n                  <div className=\"col-md-12\">\n                    <h3>Demo details</h3>\n                  </div>\n                </div>\n              </div>\n              <div className=\"container hide\" id=\"streams\">\n                <div className=\"col-md-6\">\n                  <div className=\"row\">\n                    <div className=\"panel panel-default\">\n                      <div className=\"panel-heading\">\n                        <h3 className=\"panel-title\">Streams <i id=\"update-streams\" className=\"fa fa-refresh\" title=\"Update list of streams\" style={{ cursor: 'pointer' }} /></h3>\n                      </div>\n                      <div className=\"panel-body\" id=\"list\">\n                        <div className=\"btn-group btn-group-sm\">\n                          <button className=\"btn btn-primary\" autoComplete=\"off\" id=\"watch\">Watch or\n                            Listen</button>\n                          <div className=\"btn-group btn-group-sm\">\n                            <button autoComplete=\"off\" id=\"streamset\" className=\"btn btn-default dropdown-toggle\" data-toggle=\"dropdown\">\n                              Streams list<span className=\"caret\" />\n                            </button>\n                            <ul id=\"streamslist\" className=\"dropdown-menu\" role=\"menu\">\n                            </ul>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"row hide\" id=\"info\">\n                    <div className=\"panel panel-default\">\n                      <div className=\"panel-heading\">\n                        <h3 className=\"panel-title\"><i className=\"fa fa-info-circle\" /> Metadata</h3>\n                      </div>\n                      <div className=\"panel-body\">\n                        <pre id=\"metadata\" style={{ wordBreak: 'break-word' }} />\n                      </div>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"col-md-6\">\n                  <div className=\"panel panel-default\">\n                    <div className=\"panel-heading\">\n                      <h3 className=\"panel-title\">Stream\n                        <span className=\"label label-info hide\" id=\"status\" />\n                        <span className=\"label label-primary hide\" id=\"curres\" />\n                        <span className=\"label label-info hide\" id=\"curbitrate\" />\n                      </h3>\n                    </div>\n                    <div className=\"panel-body\" id=\"stream\" />\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n};\n\n\nexport default Home;"]},"metadata":{},"sourceType":"module"}