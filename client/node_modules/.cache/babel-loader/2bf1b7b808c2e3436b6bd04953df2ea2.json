{"ast":null,"code":"import _regeneratorRuntime from\"/home/abu/Documents/dev/pro/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/abu/Documents/dev/pro/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/abu/Documents/dev/pro/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import Axios from\"axios\";import\"./SnippetEditor.scss\";import ErrorMessage from\"../misc/ErrorMessage\";import domain from\"../../util/domain\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SnippetEditor(_ref){var getSnippets=_ref.getSnippets,setSnippetEditorOpen=_ref.setSnippetEditorOpen,editSnippetData=_ref.editSnippetData;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),editorTitle=_useState2[0],setEditorTitle=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),editorDescription=_useState4[0],setEditorDescription=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),editorCode=_useState6[0],setEditorCode=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),errorMessage=_useState8[0],setErrorMessage=_useState8[1];useEffect(function(){if(editSnippetData){setEditorTitle(editSnippetData.title?editSnippetData.title:\"\");setEditorDescription(editSnippetData.description?editSnippetData.description:\"\");setEditorCode(editSnippetData.code?editSnippetData.code:\"\");}},[editSnippetData]);function saveSnippet(_x){return _saveSnippet.apply(this,arguments);}function _saveSnippet(){_saveSnippet=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var snippetData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();snippetData={title:editorTitle?editorTitle:undefined,description:editorDescription?editorDescription:undefined,code:editorCode?editorCode:undefined};_context.prev=2;if(editSnippetData){_context.next=8;break;}_context.next=6;return Axios.post(\"\".concat(domain,\"/snippet/\"),snippetData);case 6:_context.next=10;break;case 8:_context.next=10;return Axios.put(\"\".concat(domain,\"/snippet/\").concat(editSnippetData._id),snippetData);case 10:_context.next=16;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](2);if(_context.t0.response){if(_context.t0.response.data.errorMessage){setErrorMessage(_context.t0.response.data.errorMessage);}}return _context.abrupt(\"return\");case 16:getSnippets();closeEditor();case 18:case\"end\":return _context.stop();}}},_callee,null,[[2,12]]);}));return _saveSnippet.apply(this,arguments);}function closeEditor(){setSnippetEditorOpen(false);setEditorCode(\"\");setEditorDescription(\"\");setEditorTitle(\"\");}return/*#__PURE__*/_jsxs(\"div\",{className:\"snippet-editor\",children:[errorMessage&&/*#__PURE__*/_jsx(ErrorMessage,{message:errorMessage,clear:function clear(){return setErrorMessage(null);}}),/*#__PURE__*/_jsxs(\"form\",{className:\"form\",onSubmit:saveSnippet,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"editor-title\",children:\"Title\"}),/*#__PURE__*/_jsx(\"input\",{id:\"editor-title\",type:\"text\",value:editorTitle,onChange:function onChange(e){return setEditorTitle(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"editor-description\",children:\"Description\"}),/*#__PURE__*/_jsx(\"input\",{id:\"editor-description\",type:\"text\",value:editorDescription,onChange:function onChange(e){return setEditorDescription(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"editor-code\",children:\"Code\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"editor-code\",value:editorCode,onChange:function onChange(e){return setEditorCode(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-save\",type:\"submit\",children:\"Save\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-cancel\",type:\"button\",onClick:closeEditor,children:\"Cancel\"})]})]});}export default SnippetEditor;","map":{"version":3,"sources":["/home/abu/Documents/dev/pro/client/src/components/home/SnippetEditor.js"],"names":["React","useEffect","useState","Axios","ErrorMessage","domain","SnippetEditor","getSnippets","setSnippetEditorOpen","editSnippetData","editorTitle","setEditorTitle","editorDescription","setEditorDescription","editorCode","setEditorCode","errorMessage","setErrorMessage","title","description","code","saveSnippet","e","preventDefault","snippetData","undefined","post","put","_id","response","data","closeEditor","target","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport Axios from \"axios\";\nimport \"./SnippetEditor.scss\";\nimport ErrorMessage from \"../misc/ErrorMessage\";\nimport domain from \"../../util/domain\";\n\nfunction SnippetEditor({ getSnippets, setSnippetEditorOpen, editSnippetData }) {\n  const [editorTitle, setEditorTitle] = useState(\"\");\n  const [editorDescription, setEditorDescription] = useState(\"\");\n  const [editorCode, setEditorCode] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  useEffect(() => {\n    if (editSnippetData) {\n      setEditorTitle(editSnippetData.title ? editSnippetData.title : \"\");\n      setEditorDescription(\n        editSnippetData.description ? editSnippetData.description : \"\"\n      );\n      setEditorCode(editSnippetData.code ? editSnippetData.code : \"\");\n    }\n  }, [editSnippetData]);\n\n  async function saveSnippet(e) {\n    e.preventDefault();\n\n    const snippetData = {\n      title: editorTitle ? editorTitle : undefined,\n      description: editorDescription ? editorDescription : undefined,\n      code: editorCode ? editorCode : undefined,\n    };\n\n    try {\n      if (!editSnippetData) await Axios.post(`${domain}/snippet/`, snippetData);\n      else\n        await Axios.put(\n          `${domain}/snippet/${editSnippetData._id}`,\n          snippetData\n        );\n    } catch (err) {\n      if (err.response) {\n        if (err.response.data.errorMessage) {\n          setErrorMessage(err.response.data.errorMessage);\n        }\n      }\n      return;\n    }\n\n    getSnippets();\n    closeEditor();\n  }\n\n  function closeEditor() {\n    setSnippetEditorOpen(false);\n    setEditorCode(\"\");\n    setEditorDescription(\"\");\n    setEditorTitle(\"\");\n  }\n\n  return (\n    <div className=\"snippet-editor\">\n      {errorMessage && (\n        <ErrorMessage\n          message={errorMessage}\n          clear={() => setErrorMessage(null)}\n        />\n      )}\n      <form className=\"form\" onSubmit={saveSnippet}>\n        <label htmlFor=\"editor-title\">Title</label>\n        <input\n          id=\"editor-title\"\n          type=\"text\"\n          value={editorTitle}\n          onChange={(e) => setEditorTitle(e.target.value)}\n        />\n\n        <label htmlFor=\"editor-description\">Description</label>\n        <input\n          id=\"editor-description\"\n          type=\"text\"\n          value={editorDescription}\n          onChange={(e) => setEditorDescription(e.target.value)}\n        />\n\n        <label htmlFor=\"editor-code\">Code</label>\n        <textarea\n          id=\"editor-code\"\n          value={editorCode}\n          onChange={(e) => setEditorCode(e.target.value)}\n        />\n\n        <button className=\"btn-save\" type=\"submit\">\n          Save\n        </button>\n        <button className=\"btn-cancel\" type=\"button\" onClick={closeEditor}>\n          Cancel\n        </button>\n      </form>\n    </div>\n  );\n}\n\nexport default SnippetEditor;\n"]},"metadata":{},"sourceType":"module"}