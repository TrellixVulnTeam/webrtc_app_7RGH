{"ast":null,"code":"import _regeneratorRuntime from\"/home/abu/Documents/dev/experiments/exp1/client/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"/home/abu/Documents/dev/experiments/exp1/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"/home/abu/Documents/dev/experiments/exp1/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/abu/Documents/dev/experiments/exp1/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import Axios from\"axios\";import React,{useContext,useEffect,useState}from\"react\";import Snippet from\"./Snippet\";import SnippetEditor from\"./SnippetEditor\";import\"./Home.scss\";import UserContext from\"../../context/UserContext\";import{Link}from\"react-router-dom\";import domain from\"../../util/domain\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Home(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),snippets=_useState2[0],setSnippets=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),snippetEditorOpen=_useState4[0],setSnippetEditorOpen=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),editSnippetData=_useState6[0],setEditSnippetData=_useState6[1];var _useContext=useContext(UserContext),user=_useContext.user;useEffect(function(){if(!user)setSnippets([]);else getSnippets();},[user]);function getSnippets(){return _getSnippets.apply(this,arguments);}function _getSnippets(){_getSnippets=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var snippetsRes;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Axios.get(\"\".concat(domain,\"/snippet/\"));case 2:snippetsRes=_context.sent;setSnippets(snippetsRes.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return _getSnippets.apply(this,arguments);}function editSnippet(snippetData){setEditSnippetData(snippetData);setSnippetEditorOpen(true);}function renderSnippets(){var sortedSnippets=_toConsumableArray(snippets);sortedSnippets=sortedSnippets.sort(function(a,b){return new Date(b.createdAt)-new Date(a.createdAt);});return sortedSnippets.map(function(snippet,i){return/*#__PURE__*/_jsx(Snippet,{snippet:snippet,getSnippets:getSnippets,editSnippet:editSnippet},i);});}return/*#__PURE__*/_jsxs(\"div\",{className:\"home\",children:[!snippetEditorOpen&&user&&/*#__PURE__*/_jsx(\"button\",{className:\"btn-editor-toggle\",onClick:function onClick(){return setSnippetEditorOpen(true);},children:\"Add snippet\"}),snippetEditorOpen&&/*#__PURE__*/_jsx(SnippetEditor,{setSnippetEditorOpen:setSnippetEditorOpen,getSnippets:getSnippets,editSnippetData:editSnippetData}),snippets.length>0?renderSnippets():user&&/*#__PURE__*/_jsx(\"p\",{className:\"no-snippets-msg\",children:\"No snippets have been added yet.\"}),user===null&&/*#__PURE__*/_jsxs(\"div\",{className:\"no-user-message\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Welcome to Snippet manager\"}),/*#__PURE__*/_jsx(Link,{to:\"/register\",children:\"Register here\"})]})]});}export default Home;","map":{"version":3,"sources":["/home/abu/Documents/dev/experiments/exp1/client/src/components/home/Home.js"],"names":["Axios","React","useContext","useEffect","useState","Snippet","SnippetEditor","UserContext","Link","domain","Home","snippets","setSnippets","snippetEditorOpen","setSnippetEditorOpen","editSnippetData","setEditSnippetData","user","getSnippets","get","snippetsRes","data","editSnippet","snippetData","renderSnippets","sortedSnippets","sort","a","b","Date","createdAt","map","snippet","i","length"],"mappings":"6gBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,KAAP,EAAgBC,UAAhB,CAA4BC,SAA5B,CAAuCC,QAAvC,KAAuD,OAAvD,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CACA,MAAOC,CAAAA,aAAP,KAA0B,iBAA1B,CACA,MAAO,aAAP,CACA,MAAOC,CAAAA,WAAP,KAAwB,2BAAxB,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,CAAAA,MAAP,KAAmB,mBAAnB,C,wFAEA,QAASC,CAAAA,IAAT,EAAgB,CACd,cAAgCN,QAAQ,CAAC,EAAD,CAAxC,wCAAOO,QAAP,eAAiBC,WAAjB,eACA,eAAkDR,QAAQ,CAAC,KAAD,CAA1D,yCAAOS,iBAAP,eAA0BC,oBAA1B,eACA,eAA8CV,QAAQ,CAAC,IAAD,CAAtD,yCAAOW,eAAP,eAAwBC,kBAAxB,eAEA,gBAAiBd,UAAU,CAACK,WAAD,CAA3B,CAAQU,IAAR,aAAQA,IAAR,CAEAd,SAAS,CAAC,UAAM,CACd,GAAI,CAACc,IAAL,CAAWL,WAAW,CAAC,EAAD,CAAX,CAAX,IACKM,CAAAA,WAAW,GACjB,CAHQ,CAGN,CAACD,IAAD,CAHM,CAAT,CAPc,QAYCC,CAAAA,WAZD,2IAYd,yKAC4BlB,CAAAA,KAAK,CAACmB,GAAN,WAAaV,MAAb,cAD5B,QACQW,WADR,eAEER,WAAW,CAACQ,WAAW,CAACC,IAAb,CAAX,CAFF,sDAZc,8CAiBd,QAASC,CAAAA,WAAT,CAAqBC,WAArB,CAAkC,CAChCP,kBAAkB,CAACO,WAAD,CAAlB,CACAT,oBAAoB,CAAC,IAAD,CAApB,CACD,CAED,QAASU,CAAAA,cAAT,EAA0B,CACxB,GAAIC,CAAAA,cAAc,oBAAOd,QAAP,CAAlB,CACAc,cAAc,CAAGA,cAAc,CAACC,IAAf,CAAoB,SAACC,CAAD,CAAIC,CAAJ,CAAU,CAC7C,MAAO,IAAIC,CAAAA,IAAJ,CAASD,CAAC,CAACE,SAAX,EAAwB,GAAID,CAAAA,IAAJ,CAASF,CAAC,CAACG,SAAX,CAA/B,CACD,CAFgB,CAAjB,CAIA,MAAOL,CAAAA,cAAc,CAACM,GAAf,CAAmB,SAACC,OAAD,CAAUC,CAAV,CAAgB,CACxC,mBACE,KAAC,OAAD,EAEE,OAAO,CAAED,OAFX,CAGE,WAAW,CAAEd,WAHf,CAIE,WAAW,CAAEI,WAJf,EACOW,CADP,CADF,CAQD,CATM,CAAP,CAUD,CAED,mBACE,aAAK,SAAS,CAAC,MAAf,WACG,CAACpB,iBAAD,EAAsBI,IAAtB,eACC,eACE,SAAS,CAAC,mBADZ,CAEE,OAAO,CAAE,yBAAMH,CAAAA,oBAAoB,CAAC,IAAD,CAA1B,EAFX,yBAFJ,CASGD,iBAAiB,eAChB,KAAC,aAAD,EACE,oBAAoB,CAAEC,oBADxB,CAEE,WAAW,CAAEI,WAFf,CAGE,eAAe,CAAEH,eAHnB,EAVJ,CAgBGJ,QAAQ,CAACuB,MAAT,CAAkB,CAAlB,CACGV,cAAc,EADjB,CAEGP,IAAI,eACF,UAAG,SAAS,CAAC,iBAAb,8CAnBR,CAqBGA,IAAI,GAAK,IAAT,eACC,aAAK,SAAS,CAAC,iBAAf,wBACE,kDADF,cAEE,KAAC,IAAD,EAAM,EAAE,CAAC,WAAT,2BAFF,GAtBJ,GADF,CA8BD,CAED,cAAeP,CAAAA,IAAf","sourcesContent":["import Axios from \"axios\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport Snippet from \"./Snippet\";\nimport SnippetEditor from \"./SnippetEditor\";\nimport \"./Home.scss\";\nimport UserContext from \"../../context/UserContext\";\nimport { Link } from \"react-router-dom\";\nimport domain from \"../../util/domain\";\n\nfunction Home() {\n  const [snippets, setSnippets] = useState([]);\n  const [snippetEditorOpen, setSnippetEditorOpen] = useState(false);\n  const [editSnippetData, setEditSnippetData] = useState(null);\n\n  const { user } = useContext(UserContext);\n\n  useEffect(() => {\n    if (!user) setSnippets([]);\n    else getSnippets();\n  }, [user]);\n\n  async function getSnippets() {\n    const snippetsRes = await Axios.get(`${domain}/snippet/`);\n    setSnippets(snippetsRes.data);\n  }\n\n  function editSnippet(snippetData) {\n    setEditSnippetData(snippetData);\n    setSnippetEditorOpen(true);\n  }\n\n  function renderSnippets() {\n    let sortedSnippets = [...snippets];\n    sortedSnippets = sortedSnippets.sort((a, b) => {\n      return new Date(b.createdAt) - new Date(a.createdAt);\n    });\n\n    return sortedSnippets.map((snippet, i) => {\n      return (\n        <Snippet\n          key={i}\n          snippet={snippet}\n          getSnippets={getSnippets}\n          editSnippet={editSnippet}\n        />\n      );\n    });\n  }\n\n  return (\n    <div className=\"home\">\n      {!snippetEditorOpen && user && (\n        <button\n          className=\"btn-editor-toggle\"\n          onClick={() => setSnippetEditorOpen(true)}\n        >\n          Add snippet\n        </button>\n      )}\n      {snippetEditorOpen && (\n        <SnippetEditor\n          setSnippetEditorOpen={setSnippetEditorOpen}\n          getSnippets={getSnippets}\n          editSnippetData={editSnippetData}\n        />\n      )}\n      {snippets.length > 0\n        ? renderSnippets()\n        : user && (\n            <p className=\"no-snippets-msg\">No snippets have been added yet.</p>\n          )}\n      {user === null && (\n        <div className=\"no-user-message\">\n          <h2>Welcome to Snippet manager</h2>\n          <Link to=\"/register\">Register here</Link>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}