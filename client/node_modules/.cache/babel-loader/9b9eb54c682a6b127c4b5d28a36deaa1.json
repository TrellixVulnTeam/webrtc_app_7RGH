{"ast":null,"code":"var _jsxFileName = \"/home/abu/Documents/dev/experiments/exp1/client/src/components/home/Stream.js\";\nimport Axios from \"axios\";\nimport React, { useContext, useEffect, useState } from \"react\"; // import \"./Home.scss\";\n\nimport UserContext from \"../../context/UserContext\";\nimport { Link } from \"react-router-dom\";\nimport domain from \"../../util/domain\";\nimport { Helmet } from \"react-helmet\";\nimport Janus from './Janus';\nimport $ from \"jquery\";\nimport bootbox from \"bootbox\";\nimport toastr from \"toastr\";\nimport Spinner from \"spin\"; // function Stream() {\n//     const { user } = useContext(UserContext);\n//     return (\n//         <div className=\"home\">\n//             {(user && (\n//                 <div className=\"no-user-message\">\n//                     <h2>Here is the stream</h2>\n//                 </div>\n//             ))}\n//         </div>\n//     );\n// }\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Stream() {\n  var server = null;\n  if (window.location.protocol === 'http:') server = \"http://\" + window.location.hostname + \":8088/janus\";else server = \"https://\" + window.location.hostname + \":8089/janus\";\n  var janus = null;\n  var streaming = null;\n  var opaqueId = \"streamingtest-\" + Janus.randomString(12);\n  var bitrateTimer = null;\n  var spinner = null;\n  var simulcastStarted = false,\n      svcStarted = false;\n  var selectedStream = null;\n  $(document).ready(function () {\n    // Initialize the library (all console debuggers enabled)\n    Janus.init({\n      debug: \"all\",\n      callback: function () {\n        // Use a button to start the demo\n        $('#start').one('click', function () {\n          $(this).attr('disabled', true).unbind('click'); // Make sure the browser supports WebRTC\n\n          if (!Janus.isWebrtcSupported()) {\n            bootbox.alert(\"No WebRTC support... \");\n            return;\n          } // Create session\n\n\n          janus = new Janus({\n            server: server,\n            success: function () {\n              // Attach to Streaming plugin\n              janus.attach({\n                plugin: \"janus.plugin.streaming\",\n                opaqueId: opaqueId,\n                success: function (pluginHandle) {\n                  $('#details').remove();\n                  streaming = pluginHandle;\n                  Janus.log(\"Plugin attached! (\" + streaming.getPlugin() + \", id=\" + streaming.getId() + \")\"); // Setup streaming session\n\n                  $('#update-streams').click(updateStreamsList);\n                  updateStreamsList();\n                  $('#start').removeAttr('disabled').html(\"Stop\").click(function () {\n                    $(this).attr('disabled', true);\n                    clearInterval(bitrateTimer);\n                    janus.destroy();\n                    $('#streamslist').attr('disabled', true);\n                    $('#watch').attr('disabled', true).unbind('click');\n                    $('#start').attr('disabled', true).html(\"Bye\").unbind('click');\n                  });\n                },\n                error: function (error) {\n                  Janus.error(\"  -- Error attaching plugin... \", error);\n                  bootbox.alert(\"Error attaching plugin... \" + error);\n                },\n                iceState: function (state) {\n                  Janus.log(\"ICE state changed to \" + state);\n                },\n                webrtcState: function (on) {\n                  Janus.log(\"Janus says our WebRTC PeerConnection is \" + (on ? \"up\" : \"down\") + \" now\");\n                },\n                onmessage: function (msg, jsep) {\n                  Janus.debug(\" ::: Got a message :::\", msg);\n                  var result = msg[\"result\"];\n\n                  if (result) {\n                    if (result[\"status\"]) {\n                      var status = result[\"status\"];\n                      if (status === 'starting') $('#status').removeClass('hide').text(\"Starting, please wait...\").show();else if (status === 'started') $('#status').removeClass('hide').text(\"Started\").show();else if (status === 'stopped') stopStream();\n                    } else if (msg[\"streaming\"] === \"event\") {\n                      // Is simulcast in place?\n                      var substream = result[\"substream\"];\n                      var temporal = result[\"temporal\"];\n                      var remoteFeed;\n\n                      if (substream !== null && substream !== undefined || temporal !== null && temporal !== undefined) {\n                        if (!simulcastStarted) {\n                          simulcastStarted = true;\n                          addSimulcastButtons(remoteFeed.videoCodec === \"vp8\");\n                        } // We just received notice that there's been a switch, update the buttons\n\n\n                        updateSimulcastButtons(substream, temporal);\n                      } // Is VP9/SVC in place?\n\n\n                      var spatial = result[\"spatial_layer\"];\n                      temporal = result[\"temporal_layer\"];\n\n                      if (spatial !== null && spatial !== undefined || temporal !== null && temporal !== undefined) {\n                        if (!svcStarted) {\n                          svcStarted = true;\n                          addSvcButtons();\n                        } // We just received notice that there's been a switch, update the buttons\n\n\n                        updateSvcButtons(spatial, temporal);\n                      }\n                    }\n                  } else if (msg[\"error\"]) {\n                    bootbox.alert(msg[\"error\"]);\n                    stopStream();\n                    return;\n                  }\n\n                  if (jsep) {\n                    Janus.debug(\"Handling SDP as well...\", jsep);\n                    var stereo = jsep.sdp.indexOf(\"stereo=1\") !== -1; // Offer from the plugin, let's answer\n\n                    streaming.createAnswer({\n                      jsep: jsep,\n                      // We want recvonly audio/video and, if negotiated, datachannels\n                      media: {\n                        audioSend: false,\n                        videoSend: false,\n                        data: true\n                      },\n                      customizeSdp: function (jsep) {\n                        if (stereo && jsep.sdp.indexOf(\"stereo=1\") == -1) {\n                          // Make sure that our offer contains stereo too\n                          jsep.sdp = jsep.sdp.replace(\"useinbandfec=1\", \"useinbandfec=1;stereo=1\");\n                        }\n                      },\n                      success: function (jsep) {\n                        Janus.debug(\"Got SDP!\", jsep);\n                        var body = {\n                          request: \"start\"\n                        };\n                        streaming.send({\n                          message: body,\n                          jsep: jsep\n                        });\n                        $('#watch').html(\"Stop\").removeAttr('disabled').click(stopStream);\n                      },\n                      error: function (error) {\n                        Janus.error(\"WebRTC error:\", error);\n                        bootbox.alert(\"WebRTC error... \" + error.message);\n                      }\n                    });\n                  }\n                },\n                onremotestream: function (stream) {\n                  Janus.debug(\" ::: Got a remote stream :::\", stream);\n                  var addButtons = false;\n\n                  if ($('#remotevideo').length === 0) {\n                    addButtons = true;\n                    $('#stream').append('<video class=\"rounded centered hide\" id=\"remotevideo\" width=\"100%\" height=\"100%\" playsinline/>');\n                    $('#remotevideo').get(0).volume = 0; // Show the stream and hide the spinner when we get a playing event\n\n                    $(\"#remotevideo\").bind(\"playing\", function () {\n                      $('#waitingvideo').remove();\n                      if (this.videoWidth) $('#remotevideo').removeClass('hide').show();\n                      if (spinner) spinner.stop();\n                      spinner = null;\n                      var videoTracks = stream.getVideoTracks();\n                      if (!videoTracks || videoTracks.length === 0) return;\n                      var width = this.videoWidth;\n                      var height = this.videoHeight;\n                      $('#curres').removeClass('hide').text(width + 'x' + height).show();\n\n                      if (Janus.webRTCAdapter.browserDetails.browser === \"firefox\") {\n                        // Firefox Stable has a bug: width and height are not immediately available after a playing\n                        setTimeout(function () {\n                          var width = $(\"#remotevideo\").get(0).videoWidth;\n                          var height = $(\"#remotevideo\").get(0).videoHeight;\n                          $('#curres').removeClass('hide').text(width + 'x' + height).show();\n                        }, 2000);\n                      }\n                    });\n                  }\n\n                  Janus.attachMediaStream($('#remotevideo').get(0), stream);\n                  $(\"#remotevideo\").get(0).play();\n                  $(\"#remotevideo\").get(0).volume = 1;\n                  var videoTracks = stream.getVideoTracks();\n\n                  if (!videoTracks || videoTracks.length === 0) {\n                    // No remote video\n                    $('#remotevideo').hide();\n\n                    if ($('#stream .no-video-container').length === 0) {\n                      $('#stream').append('<div class=\"no-video-container\">' + '<i class=\"fa fa-video-camera fa-5 no-video-icon\"></i>' + '<span class=\"no-video-text\">No remote video available</span>' + '</div>');\n                    }\n                  } else {\n                    $('#stream .no-video-container').remove();\n                    $('#remotevideo').removeClass('hide').show();\n                  }\n\n                  if (!addButtons) return;\n\n                  if (videoTracks && videoTracks.length && (Janus.webRTCAdapter.browserDetails.browser === \"chrome\" || Janus.webRTCAdapter.browserDetails.browser === \"firefox\" || Janus.webRTCAdapter.browserDetails.browser === \"safari\")) {\n                    $('#curbitrate').removeClass('hide').show();\n                    bitrateTimer = setInterval(function () {\n                      // Display updated bitrate, if supported\n                      var bitrate = streaming.getBitrate();\n                      $('#curbitrate').text(bitrate); // Check if the resolution changed too\n\n                      var width = $(\"#remotevideo\").get(0).videoWidth;\n                      var height = $(\"#remotevideo\").get(0).videoHeight;\n                      if (width > 0 && height > 0) $('#curres').removeClass('hide').text(width + 'x' + height).show();\n                    }, 1000);\n                  }\n                },\n                ondataopen: function (data) {\n                  Janus.log(\"The DataChannel is available!\");\n                  $('#waitingvideo').remove();\n                  $('#stream').append('<input class=\"form-control\" type=\"text\" id=\"datarecv\" disabled></input>');\n                  if (spinner) spinner.stop();\n                  spinner = null;\n                },\n                ondata: function (data) {\n                  Janus.debug(\"We got data from the DataChannel!\", data);\n                  $('#datarecv').val(data);\n                },\n                oncleanup: function () {\n                  Janus.log(\" ::: Got a cleanup notification :::\");\n                  $('#waitingvideo').remove();\n                  $('#remotevideo').remove();\n                  $('#datarecv').remove();\n                  $('.no-video-container').remove();\n                  $('#bitrate').attr('disabled', true);\n                  $('#bitrateset').html('Bandwidth<span class=\"caret\"></span>');\n                  $('#curbitrate').hide();\n                  if (bitrateTimer) clearInterval(bitrateTimer);\n                  bitrateTimer = null;\n                  $('#curres').hide();\n                  $('#simulcast').remove();\n                  $('#metadata').empty();\n                  $('#info').addClass('hide').hide();\n                  simulcastStarted = false;\n                }\n              });\n            },\n            error: function (error) {\n              Janus.error(error);\n              bootbox.alert(error, function () {\n                window.location.reload();\n              });\n            },\n            destroyed: function () {\n              window.location.reload();\n            }\n          });\n        });\n      }\n    });\n  });\n\n  async function updateStreamsList() {\n    Janus.debug(\"updateStreamsList\");\n    const myInit = {\n      method: 'GET'\n    }; // fetch api \n    //const id = '60c07f7c360386d21c4ba0eb'; // fetch id\n\n    const id = '60d44ebac53d31346858c759';\n    const device = await fetch(`http://localhost:5003/auth/users/${id}/device`, myInit).then(response => response.json()).then(data => data.device);\n    Janus.log(\"fetched device \", device);\n    $('#update-streams').unbind('click').addClass('fa-spin');\n    var body = {\n      request: \"list\"\n    };\n    Janus.debug(\"Sending message:\", body);\n    streaming.send({\n      message: body,\n      success: function (result) {\n        setTimeout(function () {\n          $('#update-streams').removeClass('fa-spin').click(updateStreamsList);\n        }, 500);\n\n        if (!result) {\n          bootbox.alert(\"Got no response to our query for available streams\");\n          return;\n        }\n\n        if (result[\"list\"]) {\n          $('#streams').removeClass('hide').show();\n          $('#streamslist').empty();\n          $('#watch').attr('disabled', true).unbind('click');\n          var list = result[\"list\"];\n          Janus.log(\"Got a list of available streams\");\n\n          if (list && Array.isArray(list)) {\n            list.sort(function (a, b) {\n              if (!a || a.id < (b ? b.id : 0)) return -1;\n              if (!b || b.id < (a ? a.id : 0)) return 1;\n              return 0;\n            });\n          }\n\n          Janus.debug(list);\n          list = list.filter(stream => device.includes(stream.id + \"\"));\n          Janus.log(\"filtered list : \", list);\n\n          for (var mp in list) {\n            Janus.debug(\"  >> [\" + list[mp][\"id\"] + \"] \" + list[mp][\"description\"] + \" (\" + list[mp][\"type\"] + \")\");\n            $('#streamslist').append(\"<li><a href='#' id='\" + list[mp][\"id\"] + \"'>\" + list[mp][\"description\"] + \" (\" + list[mp][\"type\"] + \")\" + \"</a></li>\");\n          }\n\n          $('#streamslist a').unbind('click').click(function () {\n            selectedStream = $(this).attr(\"id\");\n            $('#streamset').html($(this).html()).parent().removeClass('open');\n            return false;\n          });\n          $('#watch').removeAttr('disabled').unbind('click').click(startStream);\n        }\n      }\n    });\n  }\n\n  function getStreamInfo() {\n    $('#metadata').empty();\n    $('#info').addClass('hide').hide();\n    if (!selectedStream) return; // Send a request for more info on the mountpoint we subscribed to\n\n    var body = {\n      request: \"info\",\n      id: parseInt(selectedStream) || selectedStream\n    };\n    streaming.send({\n      message: body,\n      success: function (result) {\n        if (result && result.info && result.info.metadata) {\n          $('#metadata').html(result.info.metadata);\n          $('#info').removeClass('hide').show();\n        }\n      }\n    });\n  }\n\n  function startStream() {\n    Janus.log(\"Selected video id #\" + selectedStream);\n\n    if (!selectedStream) {\n      bootbox.alert(\"Select a stream from the list\");\n      return;\n    }\n\n    $('#streamset').attr('disabled', true);\n    $('#streamslist').attr('disabled', true);\n    $('#watch').attr('disabled', true).unbind('click');\n    var body = {\n      request: \"watch\",\n      id: parseInt(selectedStream) || selectedStream\n    };\n    streaming.send({\n      message: body\n    }); // No remote video yet\n\n    $('#stream').append('<video class=\"rounded centered\" id=\"waitingvideo\" width=\"100%\" height=\"100%\" />');\n\n    if (spinner == null) {\n      var target = document.getElementById('stream');\n      spinner = new Spinner({\n        top: 100\n      }).spin(target);\n    } else {\n      spinner.spin();\n    } // Get some more info for the mountpoint to display, if any\n\n\n    getStreamInfo();\n  }\n\n  function stopStream() {\n    $('#watch').attr('disabled', true).unbind('click');\n    var body = {\n      request: \"stop\"\n    };\n    streaming.send({\n      message: body\n    });\n    streaming.hangup();\n    $('#streamset').removeAttr('disabled');\n    $('#streamslist').removeAttr('disabled');\n    $('#watch').html(\"Watch or Listen\").removeAttr('disabled').unbind('click').click(startStream);\n    $('#status').empty().hide();\n    $('#bitrate').attr('disabled', true);\n    $('#bitrateset').html('Bandwidth<span class=\"caret\"></span>');\n    $('#curbitrate').hide();\n    if (bitrateTimer) clearInterval(bitrateTimer);\n    bitrateTimer = null;\n    $('#curres').empty().hide();\n    $('#simulcast').remove();\n    simulcastStarted = false;\n  } // Helpers to create Simulcast-related UI, if enabled\n\n\n  function addSimulcastButtons(temporal) {\n    $('#curres').parent().append('<div id=\"simulcast\" class=\"btn-group-vertical btn-group-vertical-xs pull-right\">' + '\t<div class\"row\">' + '\t\t<div class=\"btn-group btn-group-xs\" style=\"width: 100%\">' + '\t\t\t<button id=\"sl-2\" type=\"button\" class=\"btn btn-primary\" data-toggle=\"tooltip\" title=\"Switch to higher quality\" style=\"width: 33%\">SL 2</button>' + '\t\t\t<button id=\"sl-1\" type=\"button\" class=\"btn btn-primary\" data-toggle=\"tooltip\" title=\"Switch to normal quality\" style=\"width: 33%\">SL 1</button>' + '\t\t\t<button id=\"sl-0\" type=\"button\" class=\"btn btn-primary\" data-toggle=\"tooltip\" title=\"Switch to lower quality\" style=\"width: 34%\">SL 0</button>' + '\t\t</div>' + '\t</div>' + '\t<div class\"row\">' + '\t\t<div class=\"btn-group btn-group-xs hide\" style=\"width: 100%\">' + '\t\t\t<button id=\"tl-2\" type=\"button\" class=\"btn btn-primary\" data-toggle=\"tooltip\" title=\"Cap to temporal layer 2\" style=\"width: 34%\">TL 2</button>' + '\t\t\t<button id=\"tl-1\" type=\"button\" class=\"btn btn-primary\" data-toggle=\"tooltip\" title=\"Cap to temporal layer 1\" style=\"width: 33%\">TL 1</button>' + '\t\t\t<button id=\"tl-0\" type=\"button\" class=\"btn btn-primary\" data-toggle=\"tooltip\" title=\"Cap to temporal layer 0\" style=\"width: 33%\">TL 0</button>' + '\t\t</div>' + '\t</div>' + '</div>'); // Enable the simulcast selection buttons\n\n    $('#sl-0').removeClass('btn-primary btn-success').addClass('btn-primary').unbind('click').click(function () {\n      toastr.info(\"Switching simulcast substream, wait for it... (lower quality)\", null, {\n        timeOut: 2000\n      });\n      if (!$('#sl-2').hasClass('btn-success')) $('#sl-2').removeClass('btn-primary btn-info').addClass('btn-primary');\n      if (!$('#sl-1').hasClass('btn-success')) $('#sl-1').removeClass('btn-primary btn-info').addClass('btn-primary');\n      $('#sl-0').removeClass('btn-primary btn-info btn-success').addClass('btn-info');\n      streaming.send({\n        message: {\n          request: \"configure\",\n          substream: 0\n        }\n      });\n    });\n    $('#sl-1').removeClass('btn-primary btn-success').addClass('btn-primary').unbind('click').click(function () {\n      toastr.info(\"Switching simulcast substream, wait for it... (normal quality)\", null, {\n        timeOut: 2000\n      });\n      if (!$('#sl-2').hasClass('btn-success')) $('#sl-2').removeClass('btn-primary btn-info').addClass('btn-primary');\n      $('#sl-1').removeClass('btn-primary btn-info btn-success').addClass('btn-info');\n      if (!$('#sl-0').hasClass('btn-success')) $('#sl-0').removeClass('btn-primary btn-info').addClass('btn-primary');\n      streaming.send({\n        message: {\n          request: \"configure\",\n          substream: 1\n        }\n      });\n    });\n    $('#sl-2').removeClass('btn-primary btn-success').addClass('btn-primary').unbind('click').click(function () {\n      toastr.info(\"Switching simulcast substream, wait for it... (higher quality)\", null, {\n        timeOut: 2000\n      });\n      $('#sl-2').removeClass('btn-primary btn-info btn-success').addClass('btn-info');\n      if (!$('#sl-1').hasClass('btn-success')) $('#sl-1').removeClass('btn-primary btn-info').addClass('btn-primary');\n      if (!$('#sl-0').hasClass('btn-success')) $('#sl-0').removeClass('btn-primary btn-info').addClass('btn-primary');\n      streaming.send({\n        message: {\n          request: \"configure\",\n          substream: 2\n        }\n      });\n    });\n    if (!temporal) // No temporal layer support\n      return;\n    $('#tl-0').parent().removeClass('hide');\n    $('#tl-0').removeClass('btn-primary btn-success').addClass('btn-primary').unbind('click').click(function () {\n      toastr.info(\"Capping simulcast temporal layer, wait for it... (lowest FPS)\", null, {\n        timeOut: 2000\n      });\n      if (!$('#tl-2').hasClass('btn-success')) $('#tl-2').removeClass('btn-primary btn-info').addClass('btn-primary');\n      if (!$('#tl-1').hasClass('btn-success')) $('#tl-1').removeClass('btn-primary btn-info').addClass('btn-primary');\n      $('#tl-0').removeClass('btn-primary btn-info btn-success').addClass('btn-info');\n      streaming.send({\n        message: {\n          request: \"configure\",\n          temporal: 0\n        }\n      });\n    });\n    $('#tl-1').removeClass('btn-primary btn-success').addClass('btn-primary').unbind('click').click(function () {\n      toastr.info(\"Capping simulcast temporal layer, wait for it... (medium FPS)\", null, {\n        timeOut: 2000\n      });\n      if (!$('#tl-2').hasClass('btn-success')) $('#tl-2').removeClass('btn-primary btn-info').addClass('btn-primary');\n      $('#tl-1').removeClass('btn-primary btn-info').addClass('btn-info');\n      if (!$('#tl-0').hasClass('btn-success')) $('#tl-0').removeClass('btn-primary btn-info').addClass('btn-primary');\n      streaming.send({\n        message: {\n          request: \"configure\",\n          temporal: 1\n        }\n      });\n    });\n    $('#tl-2').removeClass('btn-primary btn-success').addClass('btn-primary').unbind('click').click(function () {\n      toastr.info(\"Capping simulcast temporal layer, wait for it... (highest FPS)\", null, {\n        timeOut: 2000\n      });\n      $('#tl-2').removeClass('btn-primary btn-info btn-success').addClass('btn-info');\n      if (!$('#tl-1').hasClass('btn-success')) $('#tl-1').removeClass('btn-primary btn-info').addClass('btn-primary');\n      if (!$('#tl-0').hasClass('btn-success')) $('#tl-0').removeClass('btn-primary btn-info').addClass('btn-primary');\n      streaming.send({\n        message: {\n          request: \"configure\",\n          temporal: 2\n        }\n      });\n    });\n  }\n\n  function updateSimulcastButtons(substream, temporal) {\n    // Check the substream\n    if (substream === 0) {\n      toastr.success(\"Switched simulcast substream! (lower quality)\", null, {\n        timeOut: 2000\n      });\n      $('#sl-2').removeClass('btn-primary btn-success').addClass('btn-primary');\n      $('#sl-1').removeClass('btn-primary btn-success').addClass('btn-primary');\n      $('#sl-0').removeClass('btn-primary btn-info btn-success').addClass('btn-success');\n    } else if (substream === 1) {\n      toastr.success(\"Switched simulcast substream! (normal quality)\", null, {\n        timeOut: 2000\n      });\n      $('#sl-2').removeClass('btn-primary btn-success').addClass('btn-primary');\n      $('#sl-1').removeClass('btn-primary btn-info btn-success').addClass('btn-success');\n      $('#sl-0').removeClass('btn-primary btn-success').addClass('btn-primary');\n    } else if (substream === 2) {\n      toastr.success(\"Switched simulcast substream! (higher quality)\", null, {\n        timeOut: 2000\n      });\n      $('#sl-2').removeClass('btn-primary btn-info btn-success').addClass('btn-success');\n      $('#sl-1').removeClass('btn-primary btn-success').addClass('btn-primary');\n      $('#sl-0').removeClass('btn-primary btn-success').addClass('btn-primary');\n    } // Check the temporal layer\n\n\n    if (temporal === 0) {\n      toastr.success(\"Capped simulcast temporal layer! (lowest FPS)\", null, {\n        timeOut: 2000\n      });\n      $('#tl-2').removeClass('btn-primary btn-success').addClass('btn-primary');\n      $('#tl-1').removeClass('btn-primary btn-success').addClass('btn-primary');\n      $('#tl-0').removeClass('btn-primary btn-info btn-success').addClass('btn-success');\n    } else if (temporal === 1) {\n      toastr.success(\"Capped simulcast temporal layer! (medium FPS)\", null, {\n        timeOut: 2000\n      });\n      $('#tl-2').removeClass('btn-primary btn-success').addClass('btn-primary');\n      $('#tl-1').removeClass('btn-primary btn-info btn-success').addClass('btn-success');\n      $('#tl-0').removeClass('btn-primary btn-success').addClass('btn-primary');\n    } else if (temporal === 2) {\n      toastr.success(\"Capped simulcast temporal layer! (highest FPS)\", null, {\n        timeOut: 2000\n      });\n      $('#tl-2').removeClass('btn-primary btn-info btn-success').addClass('btn-success');\n      $('#tl-1').removeClass('btn-primary btn-success').addClass('btn-primary');\n      $('#tl-0').removeClass('btn-primary btn-success').addClass('btn-primary');\n    }\n  } // Helpers to create SVC-related UI for a new viewer\n\n\n  function addSvcButtons() {\n    if ($('#svc').length > 0) return;\n    $('#curres').parent().append('<div id=\"svc\" class=\"btn-group-vertical btn-group-vertical-xs pull-right\">' + '\t<div class\"row\">' + '\t\t<div class=\"btn-group btn-group-xs\" style=\"width: 100%\">' + '\t\t\t<button id=\"sl-1\" type=\"button\" class=\"btn btn-primary\" data-toggle=\"tooltip\" title=\"Switch to normal resolution\" style=\"width: 50%\">SL 1</button>' + '\t\t\t<button id=\"sl-0\" type=\"button\" class=\"btn btn-primary\" data-toggle=\"tooltip\" title=\"Switch to low resolution\" style=\"width: 50%\">SL 0</button>' + '\t\t</div>' + '\t</div>' + '\t<div class\"row\">' + '\t\t<div class=\"btn-group btn-group-xs\" style=\"width: 100%\">' + '\t\t\t<button id=\"tl-2\" type=\"button\" class=\"btn btn-primary\" data-toggle=\"tooltip\" title=\"Cap to temporal layer 2 (high FPS)\" style=\"width: 34%\">TL 2</button>' + '\t\t\t<button id=\"tl-1\" type=\"button\" class=\"btn btn-primary\" data-toggle=\"tooltip\" title=\"Cap to temporal layer 1 (medium FPS)\" style=\"width: 33%\">TL 1</button>' + '\t\t\t<button id=\"tl-0\" type=\"button\" class=\"btn btn-primary\" data-toggle=\"tooltip\" title=\"Cap to temporal layer 0 (low FPS)\" style=\"width: 33%\">TL 0</button>' + '\t\t</div>' + '\t</div>' + '</div>'); // Enable the VP8 simulcast selection buttons\n\n    $('#sl-0').removeClass('btn-primary btn-success').addClass('btn-primary').unbind('click').click(function () {\n      toastr.info(\"Switching SVC spatial layer, wait for it... (low resolution)\", null, {\n        timeOut: 2000\n      });\n      if (!$('#sl-1').hasClass('btn-success')) $('#sl-1').removeClass('btn-primary btn-info').addClass('btn-primary');\n      $('#sl-0').removeClass('btn-primary btn-info btn-success').addClass('btn-info');\n      streaming.send({\n        message: {\n          request: \"configure\",\n          spatial_layer: 0\n        }\n      });\n    });\n    $('#sl-1').removeClass('btn-primary btn-success').addClass('btn-primary').unbind('click').click(function () {\n      toastr.info(\"Switching SVC spatial layer, wait for it... (normal resolution)\", null, {\n        timeOut: 2000\n      });\n      $('#sl-1').removeClass('btn-primary btn-info btn-success').addClass('btn-info');\n      if (!$('#sl-0').hasClass('btn-success')) $('#sl-0').removeClass('btn-primary btn-info').addClass('btn-primary');\n      streaming.send({\n        message: {\n          request: \"configure\",\n          spatial_layer: 1\n        }\n      });\n    });\n    $('#tl-0').removeClass('btn-primary btn-success').addClass('btn-primary').unbind('click').click(function () {\n      toastr.info(\"Capping SVC temporal layer, wait for it... (lowest FPS)\", null, {\n        timeOut: 2000\n      });\n      if (!$('#tl-2').hasClass('btn-success')) $('#tl-2').removeClass('btn-primary btn-info').addClass('btn-primary');\n      if (!$('#tl-1').hasClass('btn-success')) $('#tl-1').removeClass('btn-primary btn-info').addClass('btn-primary');\n      $('#tl-0').removeClass('btn-primary btn-info btn-success').addClass('btn-info');\n      streaming.send({\n        message: {\n          request: \"configure\",\n          temporal_layer: 0\n        }\n      });\n    });\n    $('#tl-1').removeClass('btn-primary btn-success').addClass('btn-primary').unbind('click').click(function () {\n      toastr.info(\"Capping SVC temporal layer, wait for it... (medium FPS)\", null, {\n        timeOut: 2000\n      });\n      if (!$('#tl-2').hasClass('btn-success')) $('#tl-2').removeClass('btn-primary btn-info').addClass('btn-primary');\n      $('#tl-1').removeClass('btn-primary btn-info').addClass('btn-info');\n      if (!$('#tl-0').hasClass('btn-success')) $('#tl-0').removeClass('btn-primary btn-info').addClass('btn-primary');\n      streaming.send({\n        message: {\n          request: \"configure\",\n          temporal_layer: 1\n        }\n      });\n    });\n    $('#tl-2').removeClass('btn-primary btn-success').addClass('btn-primary').unbind('click').click(function () {\n      toastr.info(\"Capping SVC temporal layer, wait for it... (highest FPS)\", null, {\n        timeOut: 2000\n      });\n      $('#tl-2').removeClass('btn-primary btn-info btn-success').addClass('btn-info');\n      if (!$('#tl-1').hasClass('btn-success')) $('#tl-1').removeClass('btn-primary btn-info').addClass('btn-primary');\n      if (!$('#tl-0').hasClass('btn-success')) $('#tl-0').removeClass('btn-primary btn-info').addClass('btn-primary');\n      streaming.send({\n        message: {\n          request: \"configure\",\n          temporal_layer: 2\n        }\n      });\n    });\n  }\n\n  function updateSvcButtons(spatial, temporal) {\n    // Check the spatial layer\n    if (spatial === 0) {\n      toastr.success(\"Switched SVC spatial layer! (lower resolution)\", null, {\n        timeOut: 2000\n      });\n      $('#sl-1').removeClass('btn-primary btn-success').addClass('btn-primary');\n      $('#sl-0').removeClass('btn-primary btn-info btn-success').addClass('btn-success');\n    } else if (spatial === 1) {\n      toastr.success(\"Switched SVC spatial layer! (normal resolution)\", null, {\n        timeOut: 2000\n      });\n      $('#sl-1').removeClass('btn-primary btn-info btn-success').addClass('btn-success');\n      $('#sl-0').removeClass('btn-primary btn-success').addClass('btn-primary');\n    } // Check the temporal layer\n\n\n    if (temporal === 0) {\n      toastr.success(\"Capped SVC temporal layer! (lowest FPS)\", null, {\n        timeOut: 2000\n      });\n      $('#tl-2').removeClass('btn-primary btn-success').addClass('btn-primary');\n      $('#tl-1').removeClass('btn-primary btn-success').addClass('btn-primary');\n      $('#tl-0').removeClass('btn-primary btn-info btn-success').addClass('btn-success');\n    } else if (temporal === 1) {\n      toastr.success(\"Capped SVC temporal layer! (medium FPS)\", null, {\n        timeOut: 2000\n      });\n      $('#tl-2').removeClass('btn-primary btn-success').addClass('btn-primary');\n      $('#tl-1').removeClass('btn-primary btn-info btn-success').addClass('btn-success');\n      $('#tl-0').removeClass('btn-primary btn-success').addClass('btn-primary');\n    } else if (temporal === 2) {\n      toastr.success(\"Capped SVC temporal layer! (highest FPS)\", null, {\n        timeOut: 2000\n      });\n      $('#tl-2').removeClass('btn-primary btn-info btn-success').addClass('btn-success');\n      $('#tl-1').removeClass('btn-primary btn-success').addClass('btn-primary');\n      $('#tl-0').removeClass('btn-primary btn-success').addClass('btn-primary');\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    class: \"container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"row\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"col-md-12\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"page-header\",\n          children: /*#__PURE__*/_jsxDEV(\"h1\", {\n            children: [\"Plugin Demo: Streaming\", /*#__PURE__*/_jsxDEV(\"button\", {\n              class: \"btn btn-default\",\n              autocomplete: \"off\",\n              id: \"start\",\n              children: \"Start\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 640,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 639,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 638,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"container\",\n          id: \"details\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"row\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"col-md-12\",\n              children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                children: \"Demo details\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 646,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 645,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 644,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 643,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"container hide\",\n          id: \"streams\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"col-md-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"row\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"panel panel-default\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  class: \"panel-heading\",\n                  children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                    class: \"panel-title\",\n                    children: [\"Streams \", /*#__PURE__*/_jsxDEV(\"i\", {\n                      id: \"update-streams\",\n                      class: \"fa fa-refresh\",\n                      title: \"Update list of streams\",\n                      style: \"cursor: pointer;\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 655,\n                      columnNumber: 73\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 655,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 654,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  class: \"panel-body\",\n                  id: \"list\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    class: \"btn-group btn-group-sm\",\n                    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                      class: \"btn btn-primary\",\n                      autocomplete: \"off\",\n                      id: \"watch\",\n                      children: \"Watch or Listen\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 660,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      class: \"btn-group btn-group-sm\",\n                      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                        autocomplete: \"off\",\n                        id: \"streamset\",\n                        class: \"btn btn-default dropdown-toggle\",\n                        \"data-toggle\": \"dropdown\",\n                        children: [\"Streams list\", /*#__PURE__*/_jsxDEV(\"span\", {\n                          class: \"caret\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 665,\n                          columnNumber: 65\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 663,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                        id: \"streamslist\",\n                        class: \"dropdown-menu\",\n                        role: \"menu\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 667,\n                        columnNumber: 49\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 662,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 659,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 658,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 653,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 652,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"row hide\",\n              id: \"info\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"panel panel-default\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  class: \"panel-heading\",\n                  children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                    class: \"panel-title\",\n                    children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                      class: \"fa fa-info-circle\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 677,\n                      columnNumber: 65\n                    }, this), \" Metadata\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 677,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 676,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  class: \"panel-body\",\n                  children: /*#__PURE__*/_jsxDEV(\"pre\", {\n                    id: \"metadata\",\n                    style: \"word-break: break-word;\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 680,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 679,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 675,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 674,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 651,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"col-md-6\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"panel panel-default\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"panel-heading\",\n                children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                  class: \"panel-title\",\n                  children: [\"Stream\", /*#__PURE__*/_jsxDEV(\"span\", {\n                    class: \"label label-info hide\",\n                    id: \"status\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 689,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    class: \"label label-primary hide\",\n                    id: \"curres\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 690,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    class: \"label label-info hide\",\n                    id: \"curbitrate\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 691,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 688,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 687,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"panel-body\",\n                id: \"stream\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 694,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 686,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 685,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 650,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 637,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 636,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 635,\n    columnNumber: 9\n  }, this);\n}\n\n_c = Stream;\nexport default Stream;\n\nvar _c;\n\n$RefreshReg$(_c, \"Stream\");","map":{"version":3,"sources":["/home/abu/Documents/dev/experiments/exp1/client/src/components/home/Stream.js"],"names":["Axios","React","useContext","useEffect","useState","UserContext","Link","domain","Helmet","Janus","$","bootbox","toastr","Spinner","Stream","server","window","location","protocol","hostname","janus","streaming","opaqueId","randomString","bitrateTimer","spinner","simulcastStarted","svcStarted","selectedStream","document","ready","init","debug","callback","one","attr","unbind","isWebrtcSupported","alert","success","attach","plugin","pluginHandle","remove","log","getPlugin","getId","click","updateStreamsList","removeAttr","html","clearInterval","destroy","error","iceState","state","webrtcState","on","onmessage","msg","jsep","result","status","removeClass","text","show","stopStream","substream","temporal","remoteFeed","undefined","addSimulcastButtons","videoCodec","updateSimulcastButtons","spatial","addSvcButtons","updateSvcButtons","stereo","sdp","indexOf","createAnswer","media","audioSend","videoSend","data","customizeSdp","replace","body","request","send","message","onremotestream","stream","addButtons","length","append","get","volume","bind","videoWidth","stop","videoTracks","getVideoTracks","width","height","videoHeight","webRTCAdapter","browserDetails","browser","setTimeout","attachMediaStream","play","hide","setInterval","bitrate","getBitrate","ondataopen","ondata","val","oncleanup","empty","addClass","reload","destroyed","myInit","method","id","device","fetch","then","response","json","list","Array","isArray","sort","a","b","filter","includes","mp","parent","startStream","getStreamInfo","parseInt","info","metadata","target","getElementById","top","spin","hangup","timeOut","hasClass","spatial_layer","temporal_layer"],"mappings":"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","sourcesContent":["import Axios from \"axios\";\nimport React, { useContext, useEffect, useState } from \"react\";\n// import \"./Home.scss\";\nimport UserContext from \"../../context/UserContext\";\nimport { Link } from \"react-router-dom\";\nimport domain from \"../../util/domain\";\nimport { Helmet } from \"react-helmet\";\nimport Janus from './Janus';\nimport $ from \"jquery\";\nimport bootbox from \"bootbox\";\nimport toastr from \"toastr\";\nimport Spinner from \"spin\";\n\n\n// function Stream() {\n\n//     const { user } = useContext(UserContext);\n\n//     return (\n//         <div className=\"home\">\n//             {(user && (\n//                 <div className=\"no-user-message\">\n//                     <h2>Here is the stream</h2>\n//                 </div>\n//             ))}\n//         </div>\n//     );\n// }\n\n\nfunction Stream() {\n\n    var server = null;\n    if (window.location.protocol === 'http:')\n        server = \"http://\" + window.location.hostname + \":8088/janus\";\n    else\n        server = \"https://\" + window.location.hostname + \":8089/janus\";\n\n    var janus = null;\n    var streaming = null;\n    var opaqueId = \"streamingtest-\" + Janus.randomString(12);\n\n    var bitrateTimer = null;\n    var spinner = null;\n\n    var simulcastStarted = false, svcStarted = false;\n\n    var selectedStream = null;\n\n\n    $(document).ready(function () {\n        // Initialize the library (all console debuggers enabled)\n        Janus.init({\n            debug: \"all\", callback: function () {\n                // Use a button to start the demo\n                $('#start').one('click', function () {\n                    $(this).attr('disabled', true).unbind('click');\n                    // Make sure the browser supports WebRTC\n                    if (!Janus.isWebrtcSupported()) {\n                        bootbox.alert(\"No WebRTC support... \");\n                        return;\n                    }\n                    // Create session\n                    janus = new Janus(\n                        {\n                            server: server,\n                            success: function () {\n                                // Attach to Streaming plugin\n                                janus.attach(\n                                    {\n                                        plugin: \"janus.plugin.streaming\",\n                                        opaqueId: opaqueId,\n                                        success: function (pluginHandle) {\n                                            $('#details').remove();\n                                            streaming = pluginHandle;\n                                            Janus.log(\"Plugin attached! (\" + streaming.getPlugin() + \", id=\" + streaming.getId() + \")\");\n                                            // Setup streaming session\n                                            $('#update-streams').click(updateStreamsList);\n                                            updateStreamsList();\n                                            $('#start').removeAttr('disabled').html(\"Stop\")\n                                                .click(function () {\n                                                    $(this).attr('disabled', true);\n                                                    clearInterval(bitrateTimer);\n                                                    janus.destroy();\n                                                    $('#streamslist').attr('disabled', true);\n                                                    $('#watch').attr('disabled', true).unbind('click');\n                                                    $('#start').attr('disabled', true).html(\"Bye\").unbind('click');\n                                                });\n                                        },\n                                        error: function (error) {\n                                            Janus.error(\"  -- Error attaching plugin... \", error);\n                                            bootbox.alert(\"Error attaching plugin... \" + error);\n                                        },\n                                        iceState: function (state) {\n                                            Janus.log(\"ICE state changed to \" + state);\n                                        },\n                                        webrtcState: function (on) {\n                                            Janus.log(\"Janus says our WebRTC PeerConnection is \" + (on ? \"up\" : \"down\") + \" now\");\n                                        },\n                                        onmessage: function (msg, jsep) {\n                                            Janus.debug(\" ::: Got a message :::\", msg);\n                                            var result = msg[\"result\"];\n                                            if (result) {\n                                                if (result[\"status\"]) {\n                                                    var status = result[\"status\"];\n                                                    if (status === 'starting')\n                                                        $('#status').removeClass('hide').text(\"Starting, please wait...\").show();\n                                                    else if (status === 'started')\n                                                        $('#status').removeClass('hide').text(\"Started\").show();\n                                                    else if (status === 'stopped')\n                                                        stopStream();\n                                                } else if (msg[\"streaming\"] === \"event\") {\n                                                    // Is simulcast in place?\n                                                    var substream = result[\"substream\"];\n                                                    var temporal = result[\"temporal\"];\n                                                    var remoteFeed;\n                                                    if ((substream !== null && substream !== undefined) || (temporal !== null && temporal !== undefined)) {\n                                                        if (!simulcastStarted) {\n                                                            simulcastStarted = true;\n                                                            addSimulcastButtons(remoteFeed.videoCodec === \"vp8\");\n                                                        }\n                                                        // We just received notice that there's been a switch, update the buttons\n                                                        updateSimulcastButtons(substream, temporal);\n                                                    }\n                                                    // Is VP9/SVC in place?\n                                                    var spatial = result[\"spatial_layer\"];\n                                                    temporal = result[\"temporal_layer\"];\n                                                    if ((spatial !== null && spatial !== undefined) || (temporal !== null && temporal !== undefined)) {\n                                                        if (!svcStarted) {\n                                                            svcStarted = true;\n                                                            addSvcButtons();\n                                                        }\n                                                        // We just received notice that there's been a switch, update the buttons\n                                                        updateSvcButtons(spatial, temporal);\n                                                    }\n                                                }\n                                            } else if (msg[\"error\"]) {\n                                                bootbox.alert(msg[\"error\"]);\n                                                stopStream();\n                                                return;\n                                            }\n                                            if (jsep) {\n                                                Janus.debug(\"Handling SDP as well...\", jsep);\n                                                var stereo = (jsep.sdp.indexOf(\"stereo=1\") !== -1);\n                                                // Offer from the plugin, let's answer\n                                                streaming.createAnswer(\n                                                    {\n                                                        jsep: jsep,\n                                                        // We want recvonly audio/video and, if negotiated, datachannels\n                                                        media: { audioSend: false, videoSend: false, data: true },\n                                                        customizeSdp: function (jsep) {\n                                                            if (stereo && jsep.sdp.indexOf(\"stereo=1\") == -1) {\n                                                                // Make sure that our offer contains stereo too\n                                                                jsep.sdp = jsep.sdp.replace(\"useinbandfec=1\", \"useinbandfec=1;stereo=1\");\n                                                            }\n                                                        },\n                                                        success: function (jsep) {\n                                                            Janus.debug(\"Got SDP!\", jsep);\n                                                            var body = { request: \"start\" };\n                                                            streaming.send({ message: body, jsep: jsep });\n                                                            $('#watch').html(\"Stop\").removeAttr('disabled').click(stopStream);\n                                                        },\n                                                        error: function (error) {\n                                                            Janus.error(\"WebRTC error:\", error);\n                                                            bootbox.alert(\"WebRTC error... \" + error.message);\n                                                        }\n                                                    });\n                                            }\n                                        },\n                                        onremotestream: function (stream) {\n                                            Janus.debug(\" ::: Got a remote stream :::\", stream);\n                                            var addButtons = false;\n                                            if ($('#remotevideo').length === 0) {\n                                                addButtons = true;\n                                                $('#stream').append('<video class=\"rounded centered hide\" id=\"remotevideo\" width=\"100%\" height=\"100%\" playsinline/>');\n                                                $('#remotevideo').get(0).volume = 0;\n                                                // Show the stream and hide the spinner when we get a playing event\n                                                $(\"#remotevideo\").bind(\"playing\", function () {\n                                                    $('#waitingvideo').remove();\n                                                    if (this.videoWidth)\n                                                        $('#remotevideo').removeClass('hide').show();\n                                                    if (spinner)\n                                                        spinner.stop();\n                                                    spinner = null;\n                                                    var videoTracks = stream.getVideoTracks();\n                                                    if (!videoTracks || videoTracks.length === 0)\n                                                        return;\n                                                    var width = this.videoWidth;\n                                                    var height = this.videoHeight;\n                                                    $('#curres').removeClass('hide').text(width + 'x' + height).show();\n                                                    if (Janus.webRTCAdapter.browserDetails.browser === \"firefox\") {\n                                                        // Firefox Stable has a bug: width and height are not immediately available after a playing\n                                                        setTimeout(function () {\n                                                            var width = $(\"#remotevideo\").get(0).videoWidth;\n                                                            var height = $(\"#remotevideo\").get(0).videoHeight;\n                                                            $('#curres').removeClass('hide').text(width + 'x' + height).show();\n                                                        }, 2000);\n                                                    }\n                                                });\n                                            }\n                                            Janus.attachMediaStream($('#remotevideo').get(0), stream);\n                                            $(\"#remotevideo\").get(0).play();\n                                            $(\"#remotevideo\").get(0).volume = 1;\n                                            var videoTracks = stream.getVideoTracks();\n                                            if (!videoTracks || videoTracks.length === 0) {\n                                                // No remote video\n                                                $('#remotevideo').hide();\n                                                if ($('#stream .no-video-container').length === 0) {\n                                                    $('#stream').append(\n                                                        '<div class=\"no-video-container\">' +\n                                                        '<i class=\"fa fa-video-camera fa-5 no-video-icon\"></i>' +\n                                                        '<span class=\"no-video-text\">No remote video available</span>' +\n                                                        '</div>');\n                                                }\n                                            } else {\n                                                $('#stream .no-video-container').remove();\n                                                $('#remotevideo').removeClass('hide').show();\n                                            }\n                                            if (!addButtons)\n                                                return;\n                                            if (videoTracks && videoTracks.length &&\n                                                (Janus.webRTCAdapter.browserDetails.browser === \"chrome\" ||\n                                                    Janus.webRTCAdapter.browserDetails.browser === \"firefox\" ||\n                                                    Janus.webRTCAdapter.browserDetails.browser === \"safari\")) {\n                                                $('#curbitrate').removeClass('hide').show();\n                                                bitrateTimer = setInterval(function () {\n                                                    // Display updated bitrate, if supported\n                                                    var bitrate = streaming.getBitrate();\n                                                    $('#curbitrate').text(bitrate);\n                                                    // Check if the resolution changed too\n                                                    var width = $(\"#remotevideo\").get(0).videoWidth;\n                                                    var height = $(\"#remotevideo\").get(0).videoHeight;\n                                                    if (width > 0 && height > 0)\n                                                        $('#curres').removeClass('hide').text(width + 'x' + height).show();\n                                                }, 1000);\n                                            }\n                                        },\n                                        ondataopen: function (data) {\n                                            Janus.log(\"The DataChannel is available!\");\n                                            $('#waitingvideo').remove();\n                                            $('#stream').append(\n                                                '<input class=\"form-control\" type=\"text\" id=\"datarecv\" disabled></input>'\n                                            );\n                                            if (spinner)\n                                                spinner.stop();\n                                            spinner = null;\n                                        },\n                                        ondata: function (data) {\n                                            Janus.debug(\"We got data from the DataChannel!\", data);\n                                            $('#datarecv').val(data);\n                                        },\n                                        oncleanup: function () {\n                                            Janus.log(\" ::: Got a cleanup notification :::\");\n                                            $('#waitingvideo').remove();\n                                            $('#remotevideo').remove();\n                                            $('#datarecv').remove();\n                                            $('.no-video-container').remove();\n                                            $('#bitrate').attr('disabled', true);\n                                            $('#bitrateset').html('Bandwidth<span class=\"caret\"></span>');\n                                            $('#curbitrate').hide();\n                                            if (bitrateTimer)\n                                                clearInterval(bitrateTimer);\n                                            bitrateTimer = null;\n                                            $('#curres').hide();\n                                            $('#simulcast').remove();\n                                            $('#metadata').empty();\n                                            $('#info').addClass('hide').hide();\n                                            simulcastStarted = false;\n                                        }\n                                    });\n                            },\n                            error: function (error) {\n                                Janus.error(error);\n                                bootbox.alert(error, function () {\n                                    window.location.reload();\n                                });\n                            },\n                            destroyed: function () {\n                                window.location.reload();\n                            }\n                        });\n                });\n            }\n        });\n    });\n\n    async function updateStreamsList() {\n        Janus.debug(\"updateStreamsList\")\n\n        const myInit = {\n            method: 'GET'\n        }\n        // fetch api \n\n        //const id = '60c07f7c360386d21c4ba0eb'; // fetch id\n        const id = '60d44ebac53d31346858c759'\n        const device = await fetch(`http://localhost:5003/auth/users/${id}/device`, myInit)\n            .then(response => response.json())\n            .then(data => data.device);\n\n        Janus.log(\"fetched device \", device);\n\n        $('#update-streams').unbind('click').addClass('fa-spin');\n        var body = { request: \"list\" };\n        Janus.debug(\"Sending message:\", body);\n        streaming.send({\n            message: body, success: function (result) {\n                setTimeout(function () {\n                    $('#update-streams').removeClass('fa-spin').click(updateStreamsList);\n                }, 500);\n                if (!result) {\n                    bootbox.alert(\"Got no response to our query for available streams\");\n                    return;\n                }\n                if (result[\"list\"]) {\n                    $('#streams').removeClass('hide').show();\n                    $('#streamslist').empty();\n                    $('#watch').attr('disabled', true).unbind('click');\n                    var list = result[\"list\"];\n                    Janus.log(\"Got a list of available streams\");\n                    if (list && Array.isArray(list)) {\n                        list.sort(function (a, b) {\n                            if (!a || a.id < (b ? b.id : 0))\n                                return -1;\n                            if (!b || b.id < (a ? a.id : 0))\n                                return 1;\n                            return 0;\n                        });\n                    }\n                    Janus.debug(list);\n\n                    list = list.filter(stream => device.includes(stream.id + \"\"));\n\n                    Janus.log(\"filtered list : \", list);\n\n                    for (var mp in list) {\n                        Janus.debug(\"  >> [\" + list[mp][\"id\"] + \"] \" + list[mp][\"description\"] + \" (\" + list[mp][\"type\"] + \")\");\n                        $('#streamslist').append(\"<li><a href='#' id='\" + list[mp][\"id\"] + \"'>\" + list[mp][\"description\"] + \" (\" + list[mp][\"type\"] + \")\" + \"</a></li>\");\n                    }\n                    $('#streamslist a').unbind('click').click(function () {\n                        selectedStream = $(this).attr(\"id\");\n                        $('#streamset').html($(this).html()).parent().removeClass('open');\n                        return false;\n\n                    });\n                    $('#watch').removeAttr('disabled').unbind('click').click(startStream);\n                }\n            }\n        });\n    }\n\n    function getStreamInfo() {\n        $('#metadata').empty();\n        $('#info').addClass('hide').hide();\n        if (!selectedStream)\n            return;\n        // Send a request for more info on the mountpoint we subscribed to\n        var body = { request: \"info\", id: parseInt(selectedStream) || selectedStream };\n        streaming.send({\n            message: body, success: function (result) {\n                if (result && result.info && result.info.metadata) {\n                    $('#metadata').html(result.info.metadata);\n                    $('#info').removeClass('hide').show();\n                }\n            }\n        });\n    }\n\n    function startStream() {\n        Janus.log(\"Selected video id #\" + selectedStream);\n        if (!selectedStream) {\n            bootbox.alert(\"Select a stream from the list\");\n            return;\n        }\n        $('#streamset').attr('disabled', true);\n        $('#streamslist').attr('disabled', true);\n        $('#watch').attr('disabled', true).unbind('click');\n        var body = { request: \"watch\", id: parseInt(selectedStream) || selectedStream };\n        streaming.send({ message: body });\n        // No remote video yet\n        $('#stream').append('<video class=\"rounded centered\" id=\"waitingvideo\" width=\"100%\" height=\"100%\" />');\n        if (spinner == null) {\n            var target = document.getElementById('stream');\n            spinner = new Spinner({ top: 100 }).spin(target);\n        } else {\n            spinner.spin();\n        }\n        // Get some more info for the mountpoint to display, if any\n        getStreamInfo();\n    }\n\n    function stopStream() {\n        $('#watch').attr('disabled', true).unbind('click');\n        var body = { request: \"stop\" };\n        streaming.send({ message: body });\n        streaming.hangup();\n        $('#streamset').removeAttr('disabled');\n        $('#streamslist').removeAttr('disabled');\n        $('#watch').html(\"Watch or Listen\").removeAttr('disabled').unbind('click').click(startStream);\n        $('#status').empty().hide();\n        $('#bitrate').attr('disabled', true);\n        $('#bitrateset').html('Bandwidth<span class=\"caret\"></span>');\n        $('#curbitrate').hide();\n        if (bitrateTimer)\n            clearInterval(bitrateTimer);\n        bitrateTimer = null;\n        $('#curres').empty().hide();\n        $('#simulcast').remove();\n        simulcastStarted = false;\n    }\n\n    // Helpers to create Simulcast-related UI, if enabled\n    function addSimulcastButtons(temporal) {\n        $('#curres').parent().append(\n            '<div id=\"simulcast\" class=\"btn-group-vertical btn-group-vertical-xs pull-right\">' +\n            '\t<div class\"row\">' +\n            '\t\t<div class=\"btn-group btn-group-xs\" style=\"width: 100%\">' +\n            '\t\t\t<button id=\"sl-2\" type=\"button\" class=\"btn btn-primary\" data-toggle=\"tooltip\" title=\"Switch to higher quality\" style=\"width: 33%\">SL 2</button>' +\n            '\t\t\t<button id=\"sl-1\" type=\"button\" class=\"btn btn-primary\" data-toggle=\"tooltip\" title=\"Switch to normal quality\" style=\"width: 33%\">SL 1</button>' +\n            '\t\t\t<button id=\"sl-0\" type=\"button\" class=\"btn btn-primary\" data-toggle=\"tooltip\" title=\"Switch to lower quality\" style=\"width: 34%\">SL 0</button>' +\n            '\t\t</div>' +\n            '\t</div>' +\n            '\t<div class\"row\">' +\n            '\t\t<div class=\"btn-group btn-group-xs hide\" style=\"width: 100%\">' +\n            '\t\t\t<button id=\"tl-2\" type=\"button\" class=\"btn btn-primary\" data-toggle=\"tooltip\" title=\"Cap to temporal layer 2\" style=\"width: 34%\">TL 2</button>' +\n            '\t\t\t<button id=\"tl-1\" type=\"button\" class=\"btn btn-primary\" data-toggle=\"tooltip\" title=\"Cap to temporal layer 1\" style=\"width: 33%\">TL 1</button>' +\n            '\t\t\t<button id=\"tl-0\" type=\"button\" class=\"btn btn-primary\" data-toggle=\"tooltip\" title=\"Cap to temporal layer 0\" style=\"width: 33%\">TL 0</button>' +\n            '\t\t</div>' +\n            '\t</div>' +\n            '</div>');\n        // Enable the simulcast selection buttons\n        $('#sl-0').removeClass('btn-primary btn-success').addClass('btn-primary')\n            .unbind('click').click(function () {\n                toastr.info(\"Switching simulcast substream, wait for it... (lower quality)\", null, { timeOut: 2000 });\n                if (!$('#sl-2').hasClass('btn-success'))\n                    $('#sl-2').removeClass('btn-primary btn-info').addClass('btn-primary');\n                if (!$('#sl-1').hasClass('btn-success'))\n                    $('#sl-1').removeClass('btn-primary btn-info').addClass('btn-primary');\n                $('#sl-0').removeClass('btn-primary btn-info btn-success').addClass('btn-info');\n                streaming.send({ message: { request: \"configure\", substream: 0 } });\n            });\n        $('#sl-1').removeClass('btn-primary btn-success').addClass('btn-primary')\n            .unbind('click').click(function () {\n                toastr.info(\"Switching simulcast substream, wait for it... (normal quality)\", null, { timeOut: 2000 });\n                if (!$('#sl-2').hasClass('btn-success'))\n                    $('#sl-2').removeClass('btn-primary btn-info').addClass('btn-primary');\n                $('#sl-1').removeClass('btn-primary btn-info btn-success').addClass('btn-info');\n                if (!$('#sl-0').hasClass('btn-success'))\n                    $('#sl-0').removeClass('btn-primary btn-info').addClass('btn-primary');\n                streaming.send({ message: { request: \"configure\", substream: 1 } });\n            });\n        $('#sl-2').removeClass('btn-primary btn-success').addClass('btn-primary')\n            .unbind('click').click(function () {\n                toastr.info(\"Switching simulcast substream, wait for it... (higher quality)\", null, { timeOut: 2000 });\n                $('#sl-2').removeClass('btn-primary btn-info btn-success').addClass('btn-info');\n                if (!$('#sl-1').hasClass('btn-success'))\n                    $('#sl-1').removeClass('btn-primary btn-info').addClass('btn-primary');\n                if (!$('#sl-0').hasClass('btn-success'))\n                    $('#sl-0').removeClass('btn-primary btn-info').addClass('btn-primary');\n                streaming.send({ message: { request: \"configure\", substream: 2 } });\n            });\n        if (!temporal)\t// No temporal layer support\n            return;\n        $('#tl-0').parent().removeClass('hide');\n        $('#tl-0').removeClass('btn-primary btn-success').addClass('btn-primary')\n            .unbind('click').click(function () {\n                toastr.info(\"Capping simulcast temporal layer, wait for it... (lowest FPS)\", null, { timeOut: 2000 });\n                if (!$('#tl-2').hasClass('btn-success'))\n                    $('#tl-2').removeClass('btn-primary btn-info').addClass('btn-primary');\n                if (!$('#tl-1').hasClass('btn-success'))\n                    $('#tl-1').removeClass('btn-primary btn-info').addClass('btn-primary');\n                $('#tl-0').removeClass('btn-primary btn-info btn-success').addClass('btn-info');\n                streaming.send({ message: { request: \"configure\", temporal: 0 } });\n            });\n        $('#tl-1').removeClass('btn-primary btn-success').addClass('btn-primary')\n            .unbind('click').click(function () {\n                toastr.info(\"Capping simulcast temporal layer, wait for it... (medium FPS)\", null, { timeOut: 2000 });\n                if (!$('#tl-2').hasClass('btn-success'))\n                    $('#tl-2').removeClass('btn-primary btn-info').addClass('btn-primary');\n                $('#tl-1').removeClass('btn-primary btn-info').addClass('btn-info');\n                if (!$('#tl-0').hasClass('btn-success'))\n                    $('#tl-0').removeClass('btn-primary btn-info').addClass('btn-primary');\n                streaming.send({ message: { request: \"configure\", temporal: 1 } });\n            });\n        $('#tl-2').removeClass('btn-primary btn-success').addClass('btn-primary')\n            .unbind('click').click(function () {\n                toastr.info(\"Capping simulcast temporal layer, wait for it... (highest FPS)\", null, { timeOut: 2000 });\n                $('#tl-2').removeClass('btn-primary btn-info btn-success').addClass('btn-info');\n                if (!$('#tl-1').hasClass('btn-success'))\n                    $('#tl-1').removeClass('btn-primary btn-info').addClass('btn-primary');\n                if (!$('#tl-0').hasClass('btn-success'))\n                    $('#tl-0').removeClass('btn-primary btn-info').addClass('btn-primary');\n                streaming.send({ message: { request: \"configure\", temporal: 2 } });\n            });\n    }\n\n    function updateSimulcastButtons(substream, temporal) {\n        // Check the substream\n        if (substream === 0) {\n            toastr.success(\"Switched simulcast substream! (lower quality)\", null, { timeOut: 2000 });\n            $('#sl-2').removeClass('btn-primary btn-success').addClass('btn-primary');\n            $('#sl-1').removeClass('btn-primary btn-success').addClass('btn-primary');\n            $('#sl-0').removeClass('btn-primary btn-info btn-success').addClass('btn-success');\n        } else if (substream === 1) {\n            toastr.success(\"Switched simulcast substream! (normal quality)\", null, { timeOut: 2000 });\n            $('#sl-2').removeClass('btn-primary btn-success').addClass('btn-primary');\n            $('#sl-1').removeClass('btn-primary btn-info btn-success').addClass('btn-success');\n            $('#sl-0').removeClass('btn-primary btn-success').addClass('btn-primary');\n        } else if (substream === 2) {\n            toastr.success(\"Switched simulcast substream! (higher quality)\", null, { timeOut: 2000 });\n            $('#sl-2').removeClass('btn-primary btn-info btn-success').addClass('btn-success');\n            $('#sl-1').removeClass('btn-primary btn-success').addClass('btn-primary');\n            $('#sl-0').removeClass('btn-primary btn-success').addClass('btn-primary');\n        }\n        // Check the temporal layer\n        if (temporal === 0) {\n            toastr.success(\"Capped simulcast temporal layer! (lowest FPS)\", null, { timeOut: 2000 });\n            $('#tl-2').removeClass('btn-primary btn-success').addClass('btn-primary');\n            $('#tl-1').removeClass('btn-primary btn-success').addClass('btn-primary');\n            $('#tl-0').removeClass('btn-primary btn-info btn-success').addClass('btn-success');\n        } else if (temporal === 1) {\n            toastr.success(\"Capped simulcast temporal layer! (medium FPS)\", null, { timeOut: 2000 });\n            $('#tl-2').removeClass('btn-primary btn-success').addClass('btn-primary');\n            $('#tl-1').removeClass('btn-primary btn-info btn-success').addClass('btn-success');\n            $('#tl-0').removeClass('btn-primary btn-success').addClass('btn-primary');\n        } else if (temporal === 2) {\n            toastr.success(\"Capped simulcast temporal layer! (highest FPS)\", null, { timeOut: 2000 });\n            $('#tl-2').removeClass('btn-primary btn-info btn-success').addClass('btn-success');\n            $('#tl-1').removeClass('btn-primary btn-success').addClass('btn-primary');\n            $('#tl-0').removeClass('btn-primary btn-success').addClass('btn-primary');\n        }\n    }\n\n    // Helpers to create SVC-related UI for a new viewer\n    function addSvcButtons() {\n        if ($('#svc').length > 0)\n            return;\n        $('#curres').parent().append(\n            '<div id=\"svc\" class=\"btn-group-vertical btn-group-vertical-xs pull-right\">' +\n            '\t<div class\"row\">' +\n            '\t\t<div class=\"btn-group btn-group-xs\" style=\"width: 100%\">' +\n            '\t\t\t<button id=\"sl-1\" type=\"button\" class=\"btn btn-primary\" data-toggle=\"tooltip\" title=\"Switch to normal resolution\" style=\"width: 50%\">SL 1</button>' +\n            '\t\t\t<button id=\"sl-0\" type=\"button\" class=\"btn btn-primary\" data-toggle=\"tooltip\" title=\"Switch to low resolution\" style=\"width: 50%\">SL 0</button>' +\n            '\t\t</div>' +\n            '\t</div>' +\n            '\t<div class\"row\">' +\n            '\t\t<div class=\"btn-group btn-group-xs\" style=\"width: 100%\">' +\n            '\t\t\t<button id=\"tl-2\" type=\"button\" class=\"btn btn-primary\" data-toggle=\"tooltip\" title=\"Cap to temporal layer 2 (high FPS)\" style=\"width: 34%\">TL 2</button>' +\n            '\t\t\t<button id=\"tl-1\" type=\"button\" class=\"btn btn-primary\" data-toggle=\"tooltip\" title=\"Cap to temporal layer 1 (medium FPS)\" style=\"width: 33%\">TL 1</button>' +\n            '\t\t\t<button id=\"tl-0\" type=\"button\" class=\"btn btn-primary\" data-toggle=\"tooltip\" title=\"Cap to temporal layer 0 (low FPS)\" style=\"width: 33%\">TL 0</button>' +\n            '\t\t</div>' +\n            '\t</div>' +\n            '</div>'\n        );\n        // Enable the VP8 simulcast selection buttons\n        $('#sl-0').removeClass('btn-primary btn-success').addClass('btn-primary')\n            .unbind('click').click(function () {\n                toastr.info(\"Switching SVC spatial layer, wait for it... (low resolution)\", null, { timeOut: 2000 });\n                if (!$('#sl-1').hasClass('btn-success'))\n                    $('#sl-1').removeClass('btn-primary btn-info').addClass('btn-primary');\n                $('#sl-0').removeClass('btn-primary btn-info btn-success').addClass('btn-info');\n                streaming.send({ message: { request: \"configure\", spatial_layer: 0 } });\n            });\n        $('#sl-1').removeClass('btn-primary btn-success').addClass('btn-primary')\n            .unbind('click').click(function () {\n                toastr.info(\"Switching SVC spatial layer, wait for it... (normal resolution)\", null, { timeOut: 2000 });\n                $('#sl-1').removeClass('btn-primary btn-info btn-success').addClass('btn-info');\n                if (!$('#sl-0').hasClass('btn-success'))\n                    $('#sl-0').removeClass('btn-primary btn-info').addClass('btn-primary');\n                streaming.send({ message: { request: \"configure\", spatial_layer: 1 } });\n            });\n        $('#tl-0').removeClass('btn-primary btn-success').addClass('btn-primary')\n            .unbind('click').click(function () {\n                toastr.info(\"Capping SVC temporal layer, wait for it... (lowest FPS)\", null, { timeOut: 2000 });\n                if (!$('#tl-2').hasClass('btn-success'))\n                    $('#tl-2').removeClass('btn-primary btn-info').addClass('btn-primary');\n                if (!$('#tl-1').hasClass('btn-success'))\n                    $('#tl-1').removeClass('btn-primary btn-info').addClass('btn-primary');\n                $('#tl-0').removeClass('btn-primary btn-info btn-success').addClass('btn-info');\n                streaming.send({ message: { request: \"configure\", temporal_layer: 0 } });\n            });\n        $('#tl-1').removeClass('btn-primary btn-success').addClass('btn-primary')\n            .unbind('click').click(function () {\n                toastr.info(\"Capping SVC temporal layer, wait for it... (medium FPS)\", null, { timeOut: 2000 });\n                if (!$('#tl-2').hasClass('btn-success'))\n                    $('#tl-2').removeClass('btn-primary btn-info').addClass('btn-primary');\n                $('#tl-1').removeClass('btn-primary btn-info').addClass('btn-info');\n                if (!$('#tl-0').hasClass('btn-success'))\n                    $('#tl-0').removeClass('btn-primary btn-info').addClass('btn-primary');\n                streaming.send({ message: { request: \"configure\", temporal_layer: 1 } });\n            });\n        $('#tl-2').removeClass('btn-primary btn-success').addClass('btn-primary')\n            .unbind('click').click(function () {\n                toastr.info(\"Capping SVC temporal layer, wait for it... (highest FPS)\", null, { timeOut: 2000 });\n                $('#tl-2').removeClass('btn-primary btn-info btn-success').addClass('btn-info');\n                if (!$('#tl-1').hasClass('btn-success'))\n                    $('#tl-1').removeClass('btn-primary btn-info').addClass('btn-primary');\n                if (!$('#tl-0').hasClass('btn-success'))\n                    $('#tl-0').removeClass('btn-primary btn-info').addClass('btn-primary');\n                streaming.send({ message: { request: \"configure\", temporal_layer: 2 } });\n            });\n    }\n\n    function updateSvcButtons(spatial, temporal) {\n        // Check the spatial layer\n        if (spatial === 0) {\n            toastr.success(\"Switched SVC spatial layer! (lower resolution)\", null, { timeOut: 2000 });\n            $('#sl-1').removeClass('btn-primary btn-success').addClass('btn-primary');\n            $('#sl-0').removeClass('btn-primary btn-info btn-success').addClass('btn-success');\n        } else if (spatial === 1) {\n            toastr.success(\"Switched SVC spatial layer! (normal resolution)\", null, { timeOut: 2000 });\n            $('#sl-1').removeClass('btn-primary btn-info btn-success').addClass('btn-success');\n            $('#sl-0').removeClass('btn-primary btn-success').addClass('btn-primary');\n        }\n        // Check the temporal layer\n        if (temporal === 0) {\n            toastr.success(\"Capped SVC temporal layer! (lowest FPS)\", null, { timeOut: 2000 });\n            $('#tl-2').removeClass('btn-primary btn-success').addClass('btn-primary');\n            $('#tl-1').removeClass('btn-primary btn-success').addClass('btn-primary');\n            $('#tl-0').removeClass('btn-primary btn-info btn-success').addClass('btn-success');\n        } else if (temporal === 1) {\n            toastr.success(\"Capped SVC temporal layer! (medium FPS)\", null, { timeOut: 2000 });\n            $('#tl-2').removeClass('btn-primary btn-success').addClass('btn-primary');\n            $('#tl-1').removeClass('btn-primary btn-info btn-success').addClass('btn-success');\n            $('#tl-0').removeClass('btn-primary btn-success').addClass('btn-primary');\n        } else if (temporal === 2) {\n            toastr.success(\"Capped SVC temporal layer! (highest FPS)\", null, { timeOut: 2000 });\n            $('#tl-2').removeClass('btn-primary btn-info btn-success').addClass('btn-success');\n            $('#tl-1').removeClass('btn-primary btn-success').addClass('btn-primary');\n            $('#tl-0').removeClass('btn-primary btn-success').addClass('btn-primary');\n        }\n    }\n\n    return (\n        <div class=\"container\">\n            <div class=\"row\">\n                <div class=\"col-md-12\">\n                    <div class=\"page-header\">\n                        <h1>Plugin Demo: Streaming\n                            <button class=\"btn btn-default\" autocomplete=\"off\" id=\"start\">Start</button>\n                        </h1>\n                    </div>\n                    <div class=\"container\" id=\"details\">\n                        <div class=\"row\">\n                            <div class=\"col-md-12\">\n                                <h3>Demo details</h3>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"container hide\" id=\"streams\">\n                        <div class=\"col-md-6\">\n                            <div class=\"row\">\n                                <div class=\"panel panel-default\">\n                                    <div class=\"panel-heading\">\n                                        <h3 class=\"panel-title\">Streams <i id=\"update-streams\" class=\"fa fa-refresh\"\n                                            title=\"Update list of streams\" style=\"cursor: pointer;\"></i></h3>\n                                    </div>\n                                    <div class=\"panel-body\" id=\"list\">\n                                        <div class=\"btn-group btn-group-sm\">\n                                            <button class=\"btn btn-primary\" autocomplete=\"off\" id=\"watch\">Watch or\n                                                Listen</button>\n                                            <div class=\"btn-group btn-group-sm\">\n                                                <button autocomplete=\"off\" id=\"streamset\"\n                                                    class=\"btn btn-default dropdown-toggle\" data-toggle=\"dropdown\">\n                                                    Streams list<span class=\"caret\"></span>\n                                                </button>\n                                                <ul id=\"streamslist\" class=\"dropdown-menu\" role=\"menu\">\n                                                </ul>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class=\"row hide\" id=\"info\">\n                                <div class=\"panel panel-default\">\n                                    <div class=\"panel-heading\">\n                                        <h3 class=\"panel-title\"><i class=\"fa fa-info-circle\"></i> Metadata</h3>\n                                    </div>\n                                    <div class=\"panel-body\">\n                                        <pre id=\"metadata\" style=\"word-break: break-word;\"></pre>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div class=\"col-md-6\">\n                            <div class=\"panel panel-default\">\n                                <div class=\"panel-heading\">\n                                    <h3 class=\"panel-title\">Stream\n                                        <span class=\"label label-info hide\" id=\"status\"></span>\n                                        <span class=\"label label-primary hide\" id=\"curres\"></span>\n                                        <span class=\"label label-info hide\" id=\"curbitrate\"></span>\n                                    </h3>\n                                </div>\n                                <div class=\"panel-body\" id=\"stream\"></div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n        </div>\n    );\n\n}\nexport default Stream;"]},"metadata":{},"sourceType":"module"}